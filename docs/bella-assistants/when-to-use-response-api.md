# 我的Agent服务是否应该使用Response API？

## 考虑用户问题的确定性
- 这里“具有确定性的问题”，是指可以抽象出既定程序来解决的问题。与之相对，“具有不确定性的问题”，是指需要依赖模型的多步推理以及与用户的多轮交互来确定如何处理的问题。
- 对于功能单一纯粹的Agent来说，用户对其的诉求是可确定的，那么大概率是可以抽象出设定好的流程编排，那么推荐使用`Chat Completions + Bella Workflow`实现Agent。效果最稳定，实现也最简单。
- 如果户的输入可能没那么强的确定性，比如较为复杂的智能客服，可能处理几百上千种用户的问题，此时枚举分类各种场景，再为每个场景定制流程显然是一种费时费力的方法。此时就应该给模型更大的选择权，通过提示词的引导让模型自主决策下一步该做什么。

**举例**：
- 为Bella Openapi服务实现一个为用户查询账单的Agent，流程非常固定，只需要使用LLM提取用户信息以及用户问题中的查询信息，再调用查询账单的接口。这个场景肯定是使用`Chat Completions + Bella Workflow`最简单，不需要考虑Response API。
- 上文举例的支持多种类型问答的智能客服，就可以考虑使用Response API。

## 考虑Agent需要的功能
对比Response API，Chat Completions是一个更单纯的接口。可以说Response API涵盖了Chat Completions。

> Chat Completions = 开启非store模式 + 不使用任何内置工具（只使用function call）+ 不使用audio/file input 的 Response API

判断是否应该选择Response API，要看你的服务**目前或未来**是否需要这些response api的特性。如果需要，那么建议切换。如果不需要，那么继续使用更为简单的chat completions接口，性能会比response api更佳。

## 考虑Agent服务的定位
前文已经讨论过，如果去实现一件`需要模型高自由度的自主决策且多轮交互`的事情，此时轻量级的`Chat Completions + Bella Workflow`就没那么好用了。

但是很多时候，你或许希望快速搭建一个Agent应用做这样一件复杂的事情，甚至可能只是想在正式开始做某个领域的Agent之前，临时做一个demo来验证自己的某个想法是否可行。

你当然不希望，做一个沉重的系统，你的需求就只是一个低成本的、简洁的、可快速实现核心功能的轻量级服务。对稳定性、性能的要求没那么高。

此时，Response API就完全满足你的需求。你甚至不需要实现上下文管理工程，简单的接口调用即可实现所有功能。

你可以借助Response API快速做出很多轻量级的应用，去探索AI应用的可能性。它的价值在于帮助你快速落地、快速验证。

如果服务规模庞大、稳定性要求极高的场景，不建议依赖`store`模式的Response API来实现用户对话的管理。 但是如果有功能层面的需求，依然可以使用Response API的`非store`模式来直接使用丰富的工具生态，减少开发成本。

## 考虑未来的发展
Response API所实现的内置工具，是成了Bella服务体系下的各个AI能力点。

在实现一个复杂的Agent系统时，当然可以使用function call实现自己的自定义工具，而不使用Response API的内置工具。

比如调用LLM时最普遍的挂载私有知识库的需求，自行实现一个RAG工具也并非难事。

但是，Bella体系提供的能力服务是会紧随着业界AI能力的发展，不断地进行探索、更新、迭代、优化。

使用Response API可以确保你所依赖的AI能力紧随业界发展，不断进步升级。同时，不需要付出任何维护和学习成本。
