<!doctype html>
<html lang="zh-CN" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-claude-code/introduce/use-in-ide" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.1">
<title data-rh="true">IDE使用配置 | Bella Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://doc.bella.top/img/bella-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://doc.bella.top/img/bella-social-card.jpg"><meta data-rh="true" property="og:url" content="https://doc.bella.top/docs/claude-code/introduce/use-in-ide"><meta data-rh="true" property="og:locale" content="zh_CN"><meta data-rh="true" property="og:locale:alternate" content="en_US"><meta data-rh="true" name="docusaurus_locale" content="zh-CN"><meta data-rh="true" name="docsearch:language" content="zh-CN"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="IDE使用配置 | Bella Documentation"><meta data-rh="true" name="description" content="Overview"><meta data-rh="true" property="og:description" content="Overview"><link data-rh="true" rel="icon" href="/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://doc.bella.top/docs/claude-code/introduce/use-in-ide"><link data-rh="true" rel="alternate" href="https://doc.bella.top/docs/claude-code/introduce/use-in-ide" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://doc.bella.top/en/docs/claude-code/introduce/use-in-ide" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://doc.bella.top/docs/claude-code/introduce/use-in-ide" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"IDE使用配置","item":"https://doc.bella.top/docs/claude-code/introduce/use-in-ide"}]}</script><link rel="stylesheet" href="/assets/css/styles.c464aa75.css">
<script src="/assets/js/runtime~main.0a1eaa7c.js" defer="defer"></script>
<script src="/assets/js/main.9686989c.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>document.documentElement.setAttribute("data-theme","light"),document.documentElement.setAttribute("data-theme-choice","light"),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="theme-layout-navbar navbar navbar--fixed-top navbar--primary"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Bella Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="Bella Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Bella Opensource</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">文档</a><a class="navbar__item navbar__link" href="/api-viewer">API</a><a href="https://wiki.bella.top" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">DeepWiki<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item"><div id="github-star-button"></div></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>中文 (简体)</a><ul class="dropdown__menu"><li><a href="/docs/claude-code/introduce/use-in-ide" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh-CN">中文 (简体)</a></li><li><a href="/en/docs/claude-code/introduce/use-in-ide" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en-US">English</a></li></ul></div><a href="https://github.com/LianjiaTech/bella-openapi" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro"><span title="介绍（Introduction）" class="linkLabel_WmDU">介绍（Introduction）</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/bella-openapi/intro"><span title="OpenAPI" class="categoryLinkLabel_W154">OpenAPI</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/bella-assistants/intro"><span title="assistant&amp;responses" class="categoryLinkLabel_W154">assistant&amp;responses</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/bella-rag/intro"><span title="RAG" class="categoryLinkLabel_W154">RAG</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/bella-workflow/intro"><span title="Workflow" class="categoryLinkLabel_W154">Workflow</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/bella-domify/intro"><span title="Domify" class="categoryLinkLabel_W154">Domify</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/bella-knowledge/intro"><span title="Knowledge" class="categoryLinkLabel_W154">Knowledge</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/claude-code/introduction"><span title="Claude Code With Bella" class="categoryLinkLabel_W154">Claude Code With Bella</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/claude-code/introduction"><span title="导读（Introduction）" class="linkLabel_WmDU">导读（Introduction）</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/claude-code/introduce/use-in-ide"><span title="快速使用（Quick Start）" class="categoryLinkLabel_W154">快速使用（Quick Start）</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/claude-code/introduce/use-in-ide"><span title="IDE使用配置" class="linkLabel_WmDU">IDE使用配置</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/claude-code/introduce/use-in-github"><span title="GitHub使用配置" class="linkLabel_WmDU">GitHub使用配置</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/claude-code/introduce/use-in-code"><span title="编程方式调用" class="linkLabel_WmDU">编程方式调用</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/claude-code/tech/agent_design"><span title="技术分析（Tech Analysis）" class="categoryLinkLabel_W154">技术分析（Tech Analysis）</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/claude-code/case/tips"><span title="实践案例（cases）" class="categoryLinkLabel_W154">实践案例（cases）</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/claude-code/share"><span title="经验分享（shares）" class="categoryLinkLabel_W154">经验分享（shares）</span></a></div></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Claude Code With Bella</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">快速使用（Quick Start）</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">IDE使用配置</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>IDE使用配置</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Overview的直接链接" title="Overview的直接链接" translate="no">​</a></h2>
<ul>
<li>
<p>Claude Code是由anthropic-ai推出的一款强大的Code Agent，其主要特点如下：</p>
<ul>
<li>功能齐全：集成了主流IDE和GitHub中的cr, issues，在GitHub中使用：<a href="/docs/claude-code/introduce/use-in-github">Claude Code With GitHubActions</a></li>
<li>设计合理：其执行任务的过程，完美复刻了一个程序员在进行项目开发时的思考过程，在执行复杂任务上表现很好</li>
<li>不依赖Code Embeddings: 与依赖RAG的Code Agent不同，不需要针对代码训练Embedding模型，只需要LLM模型即可使用，将类似<code>README</code>的文件作为Code Base也更像一个人在进行开发</li>
<li>安全性：Code Base不依赖向量库，确保了不会在服务端存储向量化的代码</li>
<li>单一Agent的设计理念：参考 <a href="https://cognition.ai/blog/dont-build-multi-agents#principles-of-context-engineering" target="_blank" rel="noopener noreferrer">devin.ai的Agent设计理念</a>，其中以Claude Code的实现作为例子阐述理念</li>
</ul>
</li>
<li>
<p>Bella Openapi</p>
<ul>
<li>实现了Claude Code依赖的 <code>/v1/messsages</code> 接口</li>
<li>所有在Bella-Openapi中接入的LLM协议 均可使用Claude Code，不仅仅支持Claude系列模型，同时支持了Openai全系列、Gemini、DeepSeek、Qwen、Doubao等主流模型。</li>
<li>可以为Claude Code使用单独的Apikey，控制成本，且每次请求产生的费用开销在日志中清晰可见</li>
<li>企业级用户可以在使用统一网关的同时，享受最强Code Agent的全部特性</li>
</ul>
</li>
<li>
<p>对比Cursor和Windsurf，Claude Code更适合异步编程的场景。Claude Code的Planning更为复杂，执行速度较慢，但是能力更强</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="tech-background">Tech Background<a href="#tech-background" class="hash-link" aria-label="Tech Background的直接链接" title="Tech Background的直接链接" translate="no">​</a></h2>
<ul>
<li><a href="/docs/claude-code/tech/agent_design">Agent设计</a></li>
<li><a href="/docs/claude-code/tech/codebase">Code-Base设计</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="dependency">Dependency<a href="#dependency" class="hash-link" aria-label="Dependency的直接链接" title="Dependency的直接链接" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="bella-openapi">Bella-openapi<a href="#bella-openapi" class="hash-link" aria-label="Bella-openapi的直接链接" title="Bella-openapi的直接链接" translate="no">​</a></h3>
<ul>
<li><a href="https://github.com/LianjiaTech/bella-openapi" target="_blank" rel="noopener noreferrer">GitHub</a></li>
<li><a href="https://doc.bella.top/docs/bella-openapi/intro" target="_blank" rel="noopener noreferrer">文档</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="claude-code">Claude Code<a href="#claude-code" class="hash-link" aria-label="Claude Code的直接链接" title="Claude Code的直接链接" translate="no">​</a></h3>
<ul>
<li>
<p><a href="https://docs.anthropic.com/en/docs/claude-code/overview" target="_blank" rel="noopener noreferrer">官网地址</a></p>
</li>
<li>
<p>安装claud-code:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-g</span><span class="token plain"> @anthropic-ai/claude-code</span><br></span></code></pre></div></div>
<ul>
<li>IDE集成：<!-- -->
<ul>
<li>JetBrains IDE： Plugin Market安装</li>
<li>VS Code(包括Cursor和windsurf)：<!-- -->
<ul>
<li>在IDE中打开终端执行 <code>claude</code> 命令自动安装 （完成配置后才能执行）</li>
<li>或者，打开插件市场安装</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>配置：</p>
<ul>
<li>配置文件示例：<a href="https://github.com/bella-top/claude-code-with-bella/blob/main/settings.example.json" target="_blank" rel="noopener noreferrer">https://github.com/bella-top/claude-code-with-bella/blob/main/settings.example.json</a></li>
<li>创建文件写入配置：</li>
</ul>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">vim</span><span class="token plain"> ~/.claude/settings.json</span><br></span></code></pre></div></div>
<ul>
<li>如果希望claude直接修改代码，不需要经过同意可以添加<code>allow</code>权限<!-- -->
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;Edit(**)&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;Write(**)&quot;</span><br></span></code></pre></div></div>
</li>
<li>修改 <code>ANTHROPIC_BASE_URL</code> 和 <code>ANTHROPIC_AUTH_TOKEN</code></li>
<li><code>ANTHROPIC_MODEL</code> 用于执行用户的推理任务，可配置为自己想用的模型</li>
<li><code>ANTHROPIC_SMALL_FAST_MODEL</code> 用于执行一些简单的后台任务，比如<code>/clear</code>和diff写入文件等，可配置为自己想用的模型</li>
<li>根据 <a href="#%E5%B7%A5%E5%85%B7%E5%92%8C%E6%9D%83%E9%99%90%E8%AF%B4%E6%98%8E">权限说明</a> 配置 <code>permissions</code></li>
</ul>
</li>
<li>
<p>安装完成后重启IDE，打开终端执行 <code>claude</code> 命令即可启动。</p>
</li>
<li>
<p>在输入框输入：<code>/config</code>命令</p>
</li>
<li>
<p>将diff工具设置为<code>auto</code>，会自动进行IDE 检测</p>
</li>
<li>
<p>输入框执行 <code>/ide</code> 命令，检测ide是否存在</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="工作流程">工作流程<a href="#工作流程" class="hash-link" aria-label="工作流程的直接链接" title="工作流程的直接链接" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="codebase">CodeBase<a href="#codebase" class="hash-link" aria-label="CodeBase的直接链接" title="CodeBase的直接链接" translate="no">​</a></h3>
<ul>
<li>通过<code>/init</code> 生成 <code>CLAUDE.md</code> 文件，作为每个任务的起始提示词，相当于给claude提供进行项目开发的 <code>README</code>。<a href="/docs/claude-code/share/CLAUDE.example">示例</a></li>
<li>claude code的user messages中会加入<code>CLAUDE.md</code> 文件的全量内容，示例：</li>
</ul>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;messages&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;role&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;user&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;content&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token property">&quot;type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;text&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token property">&quot;text&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&lt;system-reminder&gt;\nAs you answer the user&#x27;s questions, you can use the following context:\n# claudeMd\nCodebase and user instructions are shown below. Be sure to adhere to these instructions. IMPORTANT: These instructions OVERRIDE any default behavior and you MUST follow them exactly as written.\n\nContents of /Users/saizhuolin/github/bella-openapi/api/CLAUDE.md (project instructions, checked into the codebase):\n\n# CLAUDE.md\n\nThis file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.\n\n## Project Overview\nBella OpenAPI is a multi-module Maven project that provides an OpenAPI gateway for AI services. It acts as a unified interface supporting multiple AI providers (OpenAI, AWS Bedrock, Alibaba Cloud, Huoshan, etc.) through a pluggable adapter pattern.\n\n## Module Architecture\n- **sdk/**: Core SDK with protocol definitions, DTOs, and client interfaces\n- **spi/**: Service Provider Interface module with authentication and session management (CAS/OAuth)\n- **server/**: Main Spring Boot application with REST endpoints and business logic\n\n## Build &amp; Development Commands\n\n### Basic Maven Commands\n```bash\n# Build all modules\nmvn clean compile\n\n# Run tests\nmvn test\n\n# Package without tests\nmvn package -DskipTests\n\n# Install to local repository\nmvn install\n```\n\n### Development Scripts\n```bash\n# Build the application\n./build.sh\n\n# Run the application\n./run.sh\n```\n\n## Key Architecture Patterns\n\n### Protocol Adapter Pattern\nThe core architecture uses the **AdaptorManager** pattern to route requests to different AI providers:\n- `AdaptorManager` manages protocol adapters for each endpoint\n- `IProtocolAdaptor` interface defines how to communicate with each provider\n- Adapters are organized by endpoint type (completion, embedding, tts, asr, etc.)\n\n### Multi-Layer Architecture\n1. **Controllers** (`endpoints/`): REST API endpoints\n2. **Interceptors** (`intercept/`): Cross-cutting concerns (auth, quotas, metrics)\n3. **Protocol Layer** (`protocol/`): Provider-specific adapters\n4. **Repository Layer** (`db/repo/`): Database access with jOOQ\n\n### Database Integration\n- Uses jOOQ for database access with code generation\n- Generated POJOs and Records in `server/src/codegen/`\n- Database schema initialization scripts in `server/sql/`\n\n## Configuration\n- Main config: `server/src/main/resources/application.yml`\n- Multi-environment support with profile-specific configs\n- Uses Redis for caching (Redisson) and JetCache for L1/L2 caching\n- Apollo configuration center support (optional)\n\n## Testing\n- Test configuration: `application-ut.yml`\n- API test files in `server/src/test/resources/`\n- Mock implementations available for each protocol adapter\n\n## Key Directories\n- `server/src/main/java/com/ke/bella/openapi/endpoints/`: REST controllers\n- `server/src/main/java/com/ke/bella/openapi/protocol/`: Provider adapters\n- `server/src/main/java/com/ke/bella/openapi/intercept/`: Request/response interceptors\n- `sdk/src/main/java/com/ke/bella/openapi/protocol/`: Protocol DTOs and interfaces\n- `server/src/main/resources/lua/`: Lua scripts for Redis operations\n\n## Development Notes\n- When adding new AI providers, implement `IProtocolAdaptor` and register with `AdaptorManager`\n- Protocol-specific DTOs go in SDK module, implementation in server module\n- Cost calculation and metrics collection are handled through dedicated handlers\n- Some endpoints support both streaming and non-streaming responses\n\n# important-instruction-reminders\nDo what has been asked; nothing more, nothing less.\nNEVER create files unless they&#x27;re absolutely necessary for achieving your goal.\nALWAYS prefer editing an existing file to creating a new one.\nNEVER proactively create documentation files (*.md) or README files. Only create documentation files if explicitly requested by the User.\n\n      \n      IMPORTANT: this context may or may not be relevant to your tasks. You should not respond to this context or otherwise consider it in your response unless it is highly relevant to your task. Most of the time, it is not relevant.\n&lt;/system-reminder&gt;\n&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token property">&quot;type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;text&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token property">&quot;text&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;为TransferUtils写一个测试用例&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token property">&quot;type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;text&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token property">&quot;text&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;The user selected the following lines from /Users/saizhuolin/github/bella-openapi/api/sdk/src/main/java/com/ke/bella/openapi/protocol/message/TransferUtils.java:\nTransferUtils&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<ul>
<li>重复执行<code>/init</code>可以修改当前的<code>CLAUDE.md</code> 文件，常用于更新代码后</li>
<li>Code Base优化</li>
<li>示例CodeBase中的<a href="/docs/claude-code/share/CLAUDE.example#key-directories">Key Directories</a>和<a href="/docs/claude-code/share/CLAUDE.example#key-architecture-patterns">Key Architecture Patterns</a>用于提示LLM如何查找项目文件</li>
<li>如果要加速推理，就需要优化这部分的提示词，比如给出更详细的介绍。可以加一个<code>Key Files</code>，涵盖重要且修改代码时阅读频率高的文件</li>
<li>如果模型上下文足够大，甚至可以提供全量的<code>File Description</code></li>
<li>对于当前实现的特定任务，也可以临时添加对应的<code>Key Files</code>来加速LLM的推理</li>
<li><code>File Description</code>的生成工具可以使用：<a href="https://github.com/bella-top/bella-issues-bot/blob/main/quick-start.md#%E5%88%9D%E5%A7%8B%E5%8C%96%E6%96%87%E4%BB%B6%E8%AE%B0%E5%BF%86%E7%B3%BB%E7%BB%9F" target="_blank" rel="noopener noreferrer">bella-issues-bot#初始化文件记忆系统</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="file-choose">file choose<a href="#file-choose" class="hash-link" aria-label="file choose的直接链接" title="file choose的直接链接" translate="no">​</a></h3>
<p><code>@[filename]</code> 通过 <code>@</code> 选择文件，加速推理。同时如果在终端中粘贴很长的提示词，比如一个很长的请求让claude code进行debug，可能会出现问题，可以把请求内容粘贴到一个文件里，告诉claude code读文件获取请求详情。</p>
<ul>
<li>示例： 上文json中的第三个text就是选择文件后添加的提示词，相当于告诉LLM从哪开始看起</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="claude-code常用命令">Claude Code常用命令<a href="#claude-code常用命令" class="hash-link" aria-label="Claude Code常用命令的直接链接" title="Claude Code常用命令的直接链接" translate="no">​</a></h2>
<p><strong>注意</strong>：启动claude code后，在输入框输入<code>/</code>后，会出现快捷命令列表，可以前缀匹配，用<code>方向键</code>选择 快捷命令，点击<code>tab</code>，可以选中快捷命令，点击<code>enter</code>会直接执行命令。</p>
<ul>
<li>Debug启动：<code>claude -d</code></li>
<li>help：<code>claude -h</code></li>
<li>继续上一次的对话：<code>claude -c</code></li>
<li>选择对话继续: <code>claude -r</code></li>
<li>code base: <code>/init</code> 生成 CLAUDE.md 文件，作为每个任务的起始提示词，相当于给claude提供进行项目开发的 <code>README</code></li>
<li>清除历史上下文: <code>/clear</code> 相当于开启新会话，避免之前的执行历史的干扰</li>
<li>总结历史上下文: <code>/compact</code> 当大项目执行轮次过多时，上下文可能超长，需要将历史上下文进行总结。可以提供用于总结的提示词，告诉claude code怎么总结： <code>/compact [你的提示词]</code></li>
<li>选择文件: <code>@[filename]</code> 通过 <code>@</code> 选择文件，加速推理。同时如果在终端中粘贴很长的提示词，比如一个很长的请求让claude code进行debug，可能会出现问题，可以把请求内容粘贴到一个文件里，告诉claude code读文件获取请求详情。</li>
<li>自动修改模式：按一次<code>shift + Tab</code>，进入<code>自动修改模式</code>，修改文件前不会询问</li>
<li>规划模式：按两次<code>shift + Tab</code>，进入<code>planning模式</code>，先和使用者制度计划，确认计划后再执行，适用于复杂任务场景</li>
<li>开启深度思考：提你的示词输入完成后，追加输入<code>think hard</code>或<code>think harder</code></li>
<li>添加额外的工作目录：<code>/add-dir</code>，通常用于多个项目的联合开发，或者依赖其他项目的背景知识</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="工具和权限说明">工具和权限说明<a href="#工具和权限说明" class="hash-link" aria-label="工具和权限说明的直接链接" title="工具和权限说明的直接链接" translate="no"> ​</a></h2>
<p>如果不配置权限，Claude Code执行终端命令时会询问用户。如果不想过多询问（尤其是在异步进行编程时，可能不会一直盯着执行任务的终端界面），可以将权限配置在 <code>permissions</code> 的 <code>allow</code>之下。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="claude-code的工具集合">Claude Code的工具集合<a href="#claude-code的工具集合" class="hash-link" aria-label="Claude Code的工具集合的直接链接" title="Claude Code的工具集合的直接链接" translate="no">​</a></h3>
<table><thead><tr><th style="text-align:left">Tool</th><th style="text-align:left">Description</th><th style="text-align:left">Permission Required</th></tr></thead><tbody><tr><td style="text-align:left"><strong>Agent</strong></td><td style="text-align:left">Runs a sub-agent to handle complex, multi-step tasks</td><td style="text-align:left">No</td></tr><tr><td style="text-align:left"><strong>Bash</strong></td><td style="text-align:left">Executes shell commands in your environment</td><td style="text-align:left">Yes</td></tr><tr><td style="text-align:left"><strong>Edit</strong></td><td style="text-align:left">Makes targeted edits to specific files</td><td style="text-align:left">Yes</td></tr><tr><td style="text-align:left"><strong>Glob</strong></td><td style="text-align:left">Finds files based on pattern matching</td><td style="text-align:left">No</td></tr><tr><td style="text-align:left"><strong>Grep</strong></td><td style="text-align:left">Searches for patterns in file contents</td><td style="text-align:left">No</td></tr><tr><td style="text-align:left"><strong>LS</strong></td><td style="text-align:left">Lists files and directories</td><td style="text-align:left">No</td></tr><tr><td style="text-align:left"><strong>MultiEdit</strong></td><td style="text-align:left">Performs multiple edits on a single file atomically</td><td style="text-align:left">Yes</td></tr><tr><td style="text-align:left"><strong>NotebookEdit</strong></td><td style="text-align:left">Modifies Jupyter notebook cells</td><td style="text-align:left">Yes</td></tr><tr><td style="text-align:left"><strong>NotebookRead</strong></td><td style="text-align:left">Reads and displays Jupyter notebook contents</td><td style="text-align:left">No</td></tr><tr><td style="text-align:left"><strong>Read</strong></td><td style="text-align:left">Reads the contents of files</td><td style="text-align:left">No</td></tr><tr><td style="text-align:left"><strong>TodoRead</strong></td><td style="text-align:left">Reads the current session&#x27;s task list</td><td style="text-align:left">No</td></tr><tr><td style="text-align:left"><strong>TodoWrite</strong></td><td style="text-align:left">Creates and manages structured task lists</td><td style="text-align:left">No</td></tr><tr><td style="text-align:left"><strong>WebFetch</strong></td><td style="text-align:left">Fetches content from a specified URL</td><td style="text-align:left">Yes</td></tr><tr><td style="text-align:left"><strong>WebSearch</strong></td><td style="text-align:left">Performs web searches with domain filtering</td><td style="text-align:left">Yes</td></tr><tr><td style="text-align:left"><strong>Write</strong></td><td style="text-align:left">Creates or overwrites files</td><td style="text-align:left">Yes</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="隐私文件的管理">隐私文件的管理<a href="#隐私文件的管理" class="hash-link" aria-label="隐私文件的管理的直接链接" title="隐私文件的管理的直接链接" translate="no">​</a></h3>
<p>比如包含密钥的文件，禁止修改并且没有读取意义的.lock文件等等，可以根据需要配置在 <code>permissions</code> 的 <code>deny</code>之下
示例：</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;permissions&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;deny&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Read(*.lock)&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Grep(*.lock)&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Edit(*.lock)&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Read(**/*application-dev.yml)&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Read(**/*application-prod.yml)&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Read(**/*application-test.yml)&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Read(**/*application-preview.yml)&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Grep(**/*application-dev.yml)&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Grep(**/*application-prod.yml)&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Grep(**/*application-test.yml)&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Grep(**/*application-preview.yml)&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Read(**/.env)&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Read(**/.env.*)&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Grep(**/.env)&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Grep(**/.env*)&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="实用的高级功能">实用的高级功能<a href="#实用的高级功能" class="hash-link" aria-label="实用的高级功能的直接链接" title="实用的高级功能的直接链接" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="自定义指令">自定义指令<a href="#自定义指令" class="hash-link" aria-label="自定义指令的直接链接" title="自定义指令的直接链接" translate="no">​</a></h3>
<p><strong>官方文档</strong>：<a href="https://docs.anthropic.com/zh-CN/docs/claude-code/slash-commands#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%96%9C%E6%9D%A0%E5%91%BD%E4%BB%A4" target="_blank" rel="noopener noreferrer">https://docs.anthropic.com/zh-CN/docs/claude-code/slash-commands#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%96%9C%E6%9D%A0%E5%91%BD%E4%BB%A4</a></p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">mkdir</span><span class="token plain"> ~/.claude/commands</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;按照我们的编码标准修复GitHub Issues #</span><span class="token string variable" style="color:rgb(191, 199, 213)">$ARGUMENTS</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> ~/.claude/commands/fix-issue.md</span><br></span></code></pre></div></div>
<p>使用：</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">/project:fix-issue </span><span class="token number" style="color:rgb(247, 140, 108)">123</span><br></span></code></pre></div></div>
<p><strong>注意</strong>：可以将一些常用提示词，作为命令输入</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="自定义mcp">自定义mcp<a href="#自定义mcp" class="hash-link" aria-label="自定义mcp的直接链接" title="自定义mcp的直接链接" translate="no">​</a></h3>
<p>官方文档：<a href="https://docs.anthropic.com/zh-CN/docs/claude-code/mcp" target="_blank" rel="noopener noreferrer">https://docs.anthropic.com/zh-CN/docs/claude-code/mcp</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="推荐实用的mcp工具">推荐实用的mcp工具<a href="#推荐实用的mcp工具" class="hash-link" aria-label="推荐实用的mcp工具的直接链接" title="推荐实用的mcp工具的直接链接" translate="no">​</a></h4>
<p><strong>1.</strong> 获取依赖代码库的最新版本文档和代码示例： <a href="https://github.com/upstash/context7" target="_blank" rel="noopener noreferrer">https://github.com/upstash/context7</a></p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">claude mcp </span><span class="token function" style="color:rgb(130, 170, 255)">add</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-s</span><span class="token plain"> user context7 -- npx </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-y</span><span class="token plain"> @upstash/context7-mcp</span><br></span></code></pre></div></div>
<p><strong>2.</strong> deepwiki：<a href="https://cognition.ai/blog/deepwiki-mcp-server" target="_blank" rel="noopener noreferrer">https://cognition.ai/blog/deepwiki-mcp-server</a></p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">claude mcp </span><span class="token function" style="color:rgb(130, 170, 255)">add</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-s</span><span class="token plain"> user </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-t</span><span class="token plain"> http deepwiki https://mcp.deepwiki.com/mcp</span><br></span></code></pre></div></div>
<p><strong>可以添加使用以上两个工具的提示词：</strong></p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;- When the user requests code examples, setup or configuration steps, or library/API documentation, you can use context7 tool. </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">- When the user need to conduct research on GitHub&#x27;s open-source code repository, you can use the DeepWiki tool&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> ~/.claude/commands/mcp-tool.md</span><br></span></code></pre></div></div>
<p><strong>使用：</strong></p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">/user:mcp-tool Amazon Bedrock RAG库应该怎么使用</span><br></span></code></pre></div></div>
<p><strong>使用示例：</strong>
<a href="/docs/claude-code/share/context7.example">context7使用示例</a></p>
<p><strong>3.将Claude Code集成为mcp服务</strong>：
不仅可以在Claude Code中配置MCP服务，还可以将Claude Code启动为MCP服务器，命令：<code>claude mcp serve</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="非交互式命令">非交互式命令<a href="#非交互式命令" class="hash-link" aria-label="非交互式命令的直接链接" title="非交互式命令的直接链接" translate="no">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">claude </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-p</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;按照我们的编码标准修复GitHub Issues 123&quot;</span><br></span></code></pre></div></div>
<p><strong>注意</strong>：此命令可以在自己的服务中直接调用Claude Code，实现自己需要的功能，附<a href="/docs/claude-code/introduce/use-in-code">使用攻略</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="常见问题">常见问题<a href="#常见问题" class="hash-link" aria-label="常见问题的直接链接" title="常见问题的直接链接" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ide中新增的文件没有显示">IDE中新增的文件没有显示<a href="#ide中新增的文件没有显示" class="hash-link" aria-label="IDE中新增的文件没有显示的直接链接" title="IDE中新增的文件没有显示的直接链接" translate="no">​</a></h3>
<p><strong>原因</strong>：这是由于这些IDE的文件索引未刷新导致的，原因大概率是其刷新索引依赖的文件系统的事件通知丢失了或者有延迟，且IDE自身轮询刷新的时间间隔较长。在使用JetBrains的IDE时这个问题比较明显，因为文件索引机制更为复杂。</p>
<p><strong>解决方案</strong>：手动刷新，右键项目目录 → &quot;Reload from Disk&quot;</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="依赖其他项目开发时claude-code无法获取背景知识">依赖其他项目开发时，Claude Code无法获取背景知识<a href="#依赖其他项目开发时claude-code无法获取背景知识" class="hash-link" aria-label="依赖其他项目开发时，Claude Code无法获取背景知识的直接链接" title="依赖其他项目开发时，Claude Code无法获取背景知识的直接链接" translate="no">​</a></h3>
<p><strong>原因</strong>：Claude Code只能读取和修改工作目录的文件；web-search在非美国地区用不了</p>
<p><strong>解决方案</strong>：</p>
<ul>
<li>如果项目文档齐全，可以总结项目或者复制文档提供给Claude Code</li>
<li>如果拥有目标项目源码时，可使用 <code>/add-dirs</code>命令，将目标项目加入工作目录</li>
<li>如果是公网项目，且有可直接访问的文档页，可以提供项目的网页地址给Claude Code</li>
<li>如果是公网项目，且没有可直接访问的文档页，可以使用<code>context7</code>或<code>deepwiki</code>等mcp工具</li>
</ul></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/claude-code/introduction"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">导读（Introduction）</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/claude-code/introduce/use-in-github"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">GitHub使用配置</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#tech-background" class="table-of-contents__link toc-highlight">Tech Background</a></li><li><a href="#dependency" class="table-of-contents__link toc-highlight">Dependency</a><ul><li><a href="#bella-openapi" class="table-of-contents__link toc-highlight">Bella-openapi</a></li><li><a href="#claude-code" class="table-of-contents__link toc-highlight">Claude Code</a></li></ul></li><li><a href="#工作流程" class="table-of-contents__link toc-highlight">工作流程</a><ul><li><a href="#codebase" class="table-of-contents__link toc-highlight">CodeBase</a></li><li><a href="#file-choose" class="table-of-contents__link toc-highlight">file choose</a></li></ul></li><li><a href="#claude-code常用命令" class="table-of-contents__link toc-highlight">Claude Code常用命令</a></li><li><a href="#工具和权限说明" class="table-of-contents__link toc-highlight">工具和权限说明</a><ul><li><a href="#claude-code的工具集合" class="table-of-contents__link toc-highlight">Claude Code的工具集合</a></li><li><a href="#隐私文件的管理" class="table-of-contents__link toc-highlight">隐私文件的管理</a></li></ul></li><li><a href="#实用的高级功能" class="table-of-contents__link toc-highlight">实用的高级功能</a><ul><li><a href="#自定义指令" class="table-of-contents__link toc-highlight">自定义指令</a></li><li><a href="#自定义mcp" class="table-of-contents__link toc-highlight">自定义mcp</a></li><li><a href="#非交互式命令" class="table-of-contents__link toc-highlight">非交互式命令</a></li></ul></li><li><a href="#常见问题" class="table-of-contents__link toc-highlight">常见问题</a><ul><li><a href="#ide中新增的文件没有显示" class="table-of-contents__link toc-highlight">IDE中新增的文件没有显示</a></li><li><a href="#依赖其他项目开发时claude-code无法获取背景知识" class="table-of-contents__link toc-highlight">依赖其他项目开发时，Claude Code无法获取背景知识</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">文档</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">入门指南</a></li><li class="footer__item"><a class="footer__link-item" href="/api-viewer">API 文档</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">社区</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/LianjiaTech/bella-openapi/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Issues<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">更多</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/LianjiaTech/bella-openapi" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">版权所有 2025 LianjiaTech. 基于 Docusaurus 构建。</div></div></div></footer></div>
</body>
</html>