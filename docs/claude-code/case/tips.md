# 36个实用技巧

从零基础到专家级应用，涵盖快捷键操作、提示词优化、MCP 服务器配置、项目规则设置和自动化钩子。助你全面提升 Claude Code 使用效率。

## 写在前面

我在长期使用Claude Code之后，发现Claude Code 的底层特性丰富，但由于它是终端界面，有一些不明显的特性，需要掌握很多使用技巧，才能让它从"还不错"变成"真正好用"。

如果你刚刚开始使用，感受不到使用过程中的痛点，不想过多阅读，只需了解以下几点：

```
1. Shift+Enter 默认不适用于换行。需执行 /terminal-setup 命令，但仅限 iTerm2 和 VSCode使用。
2. 粘贴图片 从剪贴板不能用 Command+V。使用 Control+V。截图使用Command+Ctrl+Shift+4。
3. 停止 Claude 不是 Control+C（那只是完全退出）。使用 Escape 来退出当前的执行。
4. 跳转到之前的消息：按两次 Escape 显示你可以跳转回去的所有之前消息的列表。
5. 选择文件/文件夹使用 “@”，输入文件名可以模糊匹配，显示文件列表，使用方向键选择，使用Tab进行确定。
```

本指南整理了 36 个实用技巧，帮助你从 Claude Code 新手快速成长为高级用户。这些技巧都经过实战验证，能显著提升开发效率，减少不必要的错误。

如果不掌握这些技巧，你可能会发现 Cursor、Windsurf 甚至 GitHub Copilot 比 Claude Code 更好用。

## 简述

这份全面的指南涵盖了从基础快捷键到高级自动化的各个方面：

- 基础快捷键和工作模式
- IDE 集成和环境配置
- 高效提示词技巧
- 最实用的 MCP 服务器
- 项目规则和配置文件管理
- 自动化钩子设置

开始学习吧！🏊♂️

## 第一部分：快速上手

这些基础技巧帮你快速熟悉 Claude Code 的基本操作。

### 1. 掌握三种工作模式切换

Claude Code 有三种工作模式，它们会根本改变程序的行为方式。熟练切换模式是高效工作的基础：

- **编辑模式**（默认）：修改文件前会征求你的同意
- **自动接受模式**（按 1 次 Shift+Tab）：直接修改文件，无需确认。坦率说，这是处理大部分任务的最佳模式
- **规划模式**（按 2 次 Shift+Tab）：只制定行动方案，不实际修改代码。特别适合做调研分析

模式切换方法：
- 按一次 Shift+Tab → 进入自动接受模式
- 再按一次 Shift+Tab → 进入规划模式
- 再按一次 Shift+Tab → 回到编辑模式

### 2. 安装 IDE 扩展插件

把 Claude Code 作为扩展插件安装到 IDE 中，能让你同时享受终端的强大功能和 IDE 的便捷体验。

安装后，它能连接 IDE 的诊断功能，提供上下文信息，还能在你熟悉的编辑器中直接显示代码差异对比。

支持 VS Code、Cursor、Windsurf、JetBrains 等主流 IDE。

[安装指南](../introduce/use-in-ide.md)

### 3. 配置多行输入功能（仅VS Code）

仅只需要配置一次：

```
/terminal-setup # 配置 Shift+Enter 实现多行输入
```

### 4. 连接 IDE 获取自动上下文

连接 IDE 后，Claude Code 会自动获取你选中的代码行作为上下文：

```
/ide # 选择你的 IDE：VS Code、Cursor 或 JetBrains 等
```

### 5. 快速启动快捷键

使用快捷键立即打开 Claude Code：

**Mac：CMD + Escape**
**Windows：CTRL + Escape**

### 6. 其他常用快捷键

| 快捷键组合 | 功能说明                     |
|------------|--------------------------|
| CMD/CTRL + L | 清空屏幕                     |
| ESC + ESC | 返回上一步                    |
| SHIFT + TAB | 切换到自动接受模式（连按两次进入规划模式）    |
| SHIFT + ENTER | vs code 配置后可实现换行输入（无需斜杠） |
| CMD/CTRL + R | 显示详细输出信息                 |

## 第二部分：核心功能运用

掌握这些核心功能，是高效使用 Claude Code 的关键。

### 7. 直接处理图片

Claude Code 支持多模态输入，你可以：

- 直接拖拽截图到 Claude Code 窗口
- 复制图片后粘贴到输入框

这对"照着这个样子做"类型的需求特别有用。


### 8. 创建自定义命令

可以轻松扩展 Claude Code 的命令功能：

```bash
# 在 .claude/commands/ 目录下创建文件
# 比如：.claude/commands/release.md
```

这样就能在 Claude Code 中使用 `/release` 命令了！

### 9. 合理清理上下文

Anthropic 的模型编程能力很强，上下文窗口也很大。但如果完成主要任务后不清理上下文，容易让模型产生混乱。

```
/clear
# 完成主要任务后使用
# 避免上下文干扰
# 减少令牌消耗
```

### 10. 会话恢复功能

有时候意外关闭了 Claude Code 或者遇到断电等情况，不用担心丢失工作进度。

你可以从上次中断的地方继续：

```
/resume
# 显示所有历史会话
# 选择任意一个继续工作
# 即使断电后也能恢复
```

## 第三部分：高级提示技巧

掌握这些技巧，能让你从 Claude Code 获得更好的效果。普通提示当然有用，但特定的关键词能带来明显更好的结果。

### 11.提及希望 Claude 查看或处理的文件

- 输入 "@[文件名]"，选择文件/文件夹
- 输入 "@" 后，会出现文件列表，继续输入可以进行文件名的模糊匹配。可使用方向键选择文件，使用 Tab 自动补全功能快速引用文件或文件夹，帮助 Claude 找到或更新正确的资源。


### 12. 将数据传递给 Claude

有几种方法可以向 Claude 提供数据：

- 直接复制并粘贴到您的提示中（最常见的方法）
- 通过管道传输到 Claude Code（例如，cat foo.txt | claude），特别适用于日志、CSV 和大数据
- 通过 "@[文件名]"，Claude Code会通过Read工具进行读取
- 告诉 Claude 通过 bash 命令、MCP 工具或自定义斜杠命令拉取数据
- 为Claude Code提供网页的url会通过webFetch工具进行读取（对图片也有效）
大多数会话都涉及这些方法的组合。例如，您可以通过管道传输一个日志文件，然后告诉 Claude 使用一个工具来引入额外的上下文来调试日志。

### 13. 控制思考深度

Claude Code 会根据你的提示分配不同的"思考令牌"：

```bash
# 基础思考（适合快速简单任务）
"...（你的需求。Think this."

# 深度思考（适合复杂逻辑）
"...(你的需求)。 think harder."

# 超深度思考（适合关键决策）
"...(你的需求)。 ultrathink."
```

思考过程会在终端中以斜体灰色文字显示。

### 14. 利用子代理处理复杂任务

Claude Code 可以创建多个代理并行处理工作：

```
"使用子代理重构这个项目"
# Claude 会自动：
# - 分析任务复杂程度
# - 创建合适数量的代理
# - 协调各代理工作
# - 整合处理结果
```

你也可以创建专门的子代理，比如一个专门写 UI 代码，一个专门写测试，还有一个专门做代码审查。

### 15. 循环执行任务

由于 Claude Code 在工具调用方面表现出色（Anthropic 模型专门针对工具调用进行了优化），它非常适合迭代修复问题：

```
"循环执行 npm run build，当出现错误时修复它们，直到编译成功"
# Claude 会：
# 1. 执行构建
# 2. 分析错误信息
# 3. 修复发现的问题
# 4. 重复执行直到成功
```

这个功能在大型重构时也很实用，需要遍历整个目录并修改多个文件时特别有效。

## 第四部分：必装 MCP 扩展

虽然我对 MCP 服务器不算狂热，但这几个确实帮助很大，我在所有项目中都默认安装它们。

### 16. Context7 MCP - 获取最新文档

是否遇到过 AI 总是使用过时框架或库版本的困扰？

Context7 MCP 能解决这个问题：

```json
{
  "mcpServers": {
    "context7": {
      "type": "stdio",
      "command": "npx",
      "args": ["-y", "@upstash/context7-mcp"],
      "env": {}
    }
  }
}
```

这个 MCP 能提供最新文档，避免 Claude 输出过时的代码模式。

### 17. Playwright MCP - 浏览器自动化

Playwright MCP 让 Claude Code 具备浏览器交互能力：

```json
{
  "mcpServers": {
    "playwright": {
      "type": "stdio",
      "command": "npx",
      "args": ["-y", "@playwright/mcp@latest"],
      "env": {}
    }
  }
}
```

安装后，Claude 就能：
- 在应用中模拟点击操作
- 检查控制台错误
- 自动截图
- 执行端到端测试

### 18. 使用其他 AI 进行代码审查

这是 Anthropic 团队亲自推荐的技巧。

使用其他模型、子代理或专门的代码审查 AI（如 CodeRabbit）来双重检查 Claude 的工作成果。

试试给它们设置不同的、更严格的审查风格，效果会更好。

## 第五部分：项目配置和规则

正确配置 Claude Code，让它深度理解你的项目特点。

这不仅能提高工作效率，还能避免在大型代码库中重复引入相同的模块和库。

### 19. 初始化已有代码库

对于现有项目，可以自动生成配置约定：

```
/init
# 会生成包含以下内容的 claude.md 文件：
# - 自动检测的代码约定
# - 文件结构分析
# - 依赖关系梳理
# - 代码模式总结
```

### 20. 动态添加规则

claude.md没有固定的格式。可以随时添加新的规则或记忆。

例如，在生成的claude.md文件中输入：

```
## Rules
### "总是使用 async/await 而不是 .then()"
```

### 21. 目录级别的配置文件

可以为不同目录创建专门的规则，Claude Code 会根据当前目录自动选择合适的规则：

```
project/
├── claude.md           # 全局规则
├── frontend/
│   └── claude.md       # 前端专用规则
└── backend/
    └── claude.md       # 后端专用规则
```

### 22. claude.md的管理

建议检入 git，以便与项目团队内部共享。如果claude.md中存在自己特有的编码风格则将其命名为 CLAUDE.local.md 并将其添加到 .gitignore 中。

### 23. 规则文件引用

还可以通过文件名引用其他规则文件。这样可以在不同 AI 工具间共享规则，避免重复配置：

```markdown
## 编程规范
参考：@.cursor/rules/self-improvement.mdc

## API 文档
参考：@docs/api.md
```

## 第六部分：项目基础规则

这些规则能为你节省大量调试时间。可以下述规则添加到Claude.md中。

同时，它们能提高代码一致性，并提供类似 Cursor 的自动"检查点"和自动修复功能。

### 24. 自动版本控制（替代 Cursor 检查点）

由于 Claude Code 没有像 Cursor 那样的检查点功能，容易丢失工作进度。

使用这个规则，可以在每个主要任务完成后自动创建检查点：

```markdown
## Git 版本控制
- 完成整个任务后自动添加并提交更改
- 使用描述性提交信息，完整记录更改范围
```

### 25. 任务完成后的诊断检查

这可能是你要添加到 Claude Code 的最重要规则。

对于每个编辑过的文件，它会运行 IDE 错误检查（代码检查、类型错误等）并自动修复。这不仅省去额外的提示步骤，还能使用项目中已配置好的正确设置。

```markdown
## 重要：代码质量检查
**完成任何任务前必须执行以下步骤：**

自动使用 IDE 内置诊断工具检查代码问题：
- 运行 `mcp__ide__getDiagnostics` 检查所有文件的诊断信息
- 在认为任务完成前修复任何代码检查或类型错误
- 对所有创建或修改的文件都要执行此步骤

这是处理任何代码相关任务时绝对不能跳过的关键环节。
```

### 26. 文档查询规则

这个规则让 Claude Code 主动查找你使用的框架或库的最新文档。

它与前面提到的 Context7 MCP 配合使用：

```markdown
## 使用 Context7 查询文档
在需要代码示例、配置步骤或库/API 文档时，使用 Context7 MCP 服务器获取信息。
```

### 27. 依赖管理

我发现 Claude Code 经常重复安装相同的包，或者安装稍微过时的版本。

这个规则能避免重复安装：

```markdown
## 技术栈和依赖管理
**项目版本：** 1.0.0
**Node.js 要求：** >=22.0.0
**最后更新：** 2025年1月

### 核心技术栈
#### Next.js 和 React（最新版本）
- **Next.js**：`^15.3.2` - 使用 App Router，支持最新特性
- **React**：`^19.1.0` - React 19 最新版本，支持并发特性
- **React DOM**：`^19.1.0` - 与 React 版本匹配
- **TypeScript**：`^5.7.3` - TypeScript 最新稳定版
```

**注意**：建议使用以下提示自动生成这个规则：
```
@package.json 分析所有主要依赖项，在 Claude.md 中创建技术栈记录，包括应用程序使用的版本以及这些版本的最佳实践说明。
```

### 28. 项目结构文档

Claude Code 经常忽略现有模块，在错误位置创建重复的类似功能。

这个配置能让它工作得更快更准确：

```markdown
# 项目结构指南
本规则说明项目的文件夹结构，用作导航和理解代码库的参考。

## 根目录
根目录包含配置文件和主要项目文件夹：
- [package.json](mdc:package.json)：项目依赖和脚本配置
- [tsconfig.json](mdc:tsconfig.json)：TypeScript 配置
- [next.config.js](mdc:next.config.js)：Next.js 配置
```

**注意**：建议使用以下提示自动生成这个规则：
```
@src 列出项目中的所有源文件和文件夹，创建新的规则文档，概述目录结构和重要文件说明。
```

### 29. 自我改进规则

这个规则帮助 Claude 从错误中学习，持续改进：

```markdown
## 规则改进触发条件
- 出现现有规则未覆盖的新代码模式
- 跨文件出现重复的类似实现
- 发现可以预防的常见错误模式
- 开始持续使用新的库或工具
- 代码库中出现新的最佳实践

## 分析流程：
- 将新代码与现有规则对比
- 识别应该标准化的模式
- 查找外部文档引用
- 检查一致的错误处理模式
- 监控测试模式和覆盖率
```

## 第七部分：高级自动化钩子

Claude Code 钩子是实现自动化的秘密武器。它们是在 Claude Code 工作流程特定节点自动执行的确定性命令，为大量自动化操作打开了大门。

### 可用的钩子类型

Claude Code 支持多种覆盖整个代理生命周期的钩子事件：

| 钩子类型 | 触发时机 | 典型用途 |
|----------|----------|----------|
| PreToolUse | 执行工具前 | 验证、环境检查、备份 |
| PostToolUse | 工具执行后 | 格式化、代码检查、测试、提交 |
| UserPromptSubmit | 用户提交提示时 | 输入验证、上下文注入 |
| Notification | 系统通知时 | 告警、日志记录、监控 |
| Stop | Claude 完成响应时 | 清理、最终检查、通知 |
| SubagentStop | 子代理完成时 | 子代理专用清理 |

### 30. 钩子实用技巧：任务完成提醒（类似 Cursor）

既然钩子功能这么强大，我当然用它来...在任务完成时获得提醒：

```json
{
  "hooks": {
    "Stop": [
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": "afplay /System/Library/Sounds/Funk.aiff"
          }
        ]
      }
    ]
  }
}
```

说起来有点讽刺，这是我从 Cursor 转过来后最想念的功能之一。

### 31. 更高级的钩子：使用脚本

钩子也可以是完整的脚本甚至应用程序。

上面的提醒示例可以扩展为：

```json
{
  "hooks": {
    "Notification": [
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": "node .claude/hooks/play-sound.js notification"
          }
        ]
      }
    ],
    "Stop": [
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": "node .claude/hooks/play-sound.js"
          }
        ]
      }
    ]
  }
}
```

### 32. 文件写入时自动格式化

最烦人的事情莫过于改了 1 行代码，格式化工具却改了 200 行。

这个钩子只对刚刚编辑的文件运行格式化：

```json
{
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "Edit|Write|MultiEdit",
        "hooks": [
          {
            "type": "command",
            "command": "npx prettier --write \"$FILE_PATH\""
          }
        ]
      }
    ]
  }
}
```

### 33. 始终验证更改

当前这一代 LLM 有时候会偷懒，做一些假设并犯浅层错误。

一个解决方案是添加钩子，在发送每个提示前提醒始终验证更改：

```json
{
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Edit|Write|Bash",
        "hooks": [
          {
            "type": "command",
            "command": "node .claude/hooks/pre-tool-use.js"
          }
        ]
      }
    ]
  }
}
```

## 第八部分：一些实践经验

## 33.合理地监督指导
虽然自动接受模式（按 shift+tab 切换）让 Claude 自主工作，但进行复杂任务时更推荐监督并指导 Claude Code进行工作。可以通过在开始时向 Claude 彻底解释任务来获得最佳结果，也可以随时纠正 Claude。

- 在编码前让 Claude 制定计划。 明确告诉它在你确认计划之前不要编码。（可以使用 plan mode模式，效果相同）
- 在任何阶段（思考、工具调用、文件编辑）按 Escape 键中断 Claude，保留上下文，以便您可以重定向或扩展指令。
- 双击 Escape 键跳回历史记录，编辑先前的提示，并探索不同的方向。您可以编辑提示并重新执行，直到获得想要的结果。
- 让 Claude 撤消更改，通常与 “按 Escape 键中断操作” 结合使用。

### 34.回退到之前的消息
如果你某一次的指令出现了问题，或者发现输入信息有误，可以执行回退操作：

```
1.按两次 Escape

2. Claude Code会列出之前的消息

3. 选择并跳转到之前的消息并在此基础上开始对话
```

### 35.任务拆解是关键
如果经常使用AI Coding，一定会发现AI在处理小任务时游刃有余，面对大项目就容易手忙脚乱。给 AI 一个笼统的"帮我完成 XXX 系统"的需求，效果远不如先把大任务拆解成具体的小任务。这一步最好在 Plan Mode 中进行，让 AI 帮你一起梳理。比如：
```
我：我想实现一个用户认证系统，帮我拆解需求
AI：好的，让我们拆解一下需要完成的任务：
1. 设计数据库表结构（用户表、会话表等）
2. 实现注册功能（验证、加密、存储）
3. 实现登录功能（验证、生成 token）
4. 实现中间件（验证 token、刷新机制）
5. 添加测试用例
   ...
 ```
对于一个 session 难以完成的任务，可以让 AI 把讨论内容进行文档化，保存到项目里（比如 dev-note/auth-implementation-plan.md）。让Claude Code一个个任务去完成。这样，即使换了新的 session，你也可以让 AI 读取这个文档，快速恢复上下文。

### 36.在合适的时机手动 compact
虽然 Claude Code 会自动进行上下文压缩，但我的经验是：主动出击会更好。当你看到上下文使用量接近用满时，不妨手动执行 /compact 命令。这可以让压缩发生在一个更自然的断点进行。比如刚完成一个功能模块，或者刚跑完一轮测试。这时候压缩，AI 不太会丢失重要信息。而如果等到自动压缩，可能正好在你改代码改到一半的时候触发，那就很容易出问题。

另一个技巧是：对于相对独立的任务，干脆新开一个 session。反正你已经把任务计划文档化了，新 session 读取文档就能快速上手。这比在一个快要爆炸的 session 里硬撑要明智得多。

当前在 AI 辅助编程中，上下文窗口依然是稀缺资源，要像管理内存一样管理它。合理规划、及时清理、必要时"换个房间"，才能让 vibe coding 的体验保持流畅。

## 总结

这 36 个技巧能让 Claude Code 从"还行"变成"真香"。从基础开始，逐步添加自动化功能，很快你就能比说出"Claude Code"这个词更快地完成代码开发。

祝编程愉快！🚀
