<!doctype html>
<html lang="en-US" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-bella-openapi/core/realtime" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Bella OpenAPI Real-time Voice Dialogue Interface Documentation | Bella Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://doc.bella.top/en/img/bella-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://doc.bella.top/en/img/bella-social-card.jpg"><meta data-rh="true" property="og:url" content="https://doc.bella.top/en/docs/bella-openapi/core/realtime"><meta data-rh="true" property="og:locale" content="en_US"><meta data-rh="true" property="og:locale:alternate" content="zh_CN"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Bella OpenAPI Real-time Voice Dialogue Interface Documentation | Bella Documentation"><meta data-rh="true" name="description" content="Table of Contents"><meta data-rh="true" property="og:description" content="Table of Contents"><link data-rh="true" rel="icon" href="/en/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://doc.bella.top/en/docs/bella-openapi/core/realtime"><link data-rh="true" rel="alternate" href="https://doc.bella.top/docs/bella-openapi/core/realtime" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://doc.bella.top/en/docs/bella-openapi/core/realtime" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://doc.bella.top/docs/bella-openapi/core/realtime" hreflang="x-default"><link rel="stylesheet" href="/en/assets/css/styles.4c251e4d.css">
<script src="/en/assets/js/runtime~main.fef87b8a.js" defer="defer"></script>
<script src="/en/assets/js/main.af485dce.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbar--primary"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/en/"><div class="navbar__logo"><img src="/en/img/logo.svg" alt="Bella Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/en/img/logo.svg" alt="Bella Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Bella</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/en/docs/intro">Document</a><a class="navbar__item navbar__link" href="/en/api-viewer">API</a><a href="https://wiki.bella.top" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">DeepWiki<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item"><div id="github-star-button"></div></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/bella-openapi/core/realtime" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-CN">中文 (简体)</a></li><li><a href="/en/docs/bella-openapi/core/realtime" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en-US">English</a></li></ul></div><a href="https://github.com/LianjiaTech/bella-openapi" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/intro">介绍（Introduction）</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/en/docs/bella-openapi/intro">OpenAPI</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/bella-openapi/intro">介绍（Introduction）</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/en/docs/bella-openapi/configuration-details">配置与部署 (Configuration &amp; Deployment)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/en/docs/bella-openapi/core/chat-completions">使用文档 (Usage Documents)</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/bella-openapi/core/chat-completions">Intelligent Q&amp;A Interface Documentation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/bella-openapi/core/embeddings">Text Embeddings API Documentation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/bella-openapi/core/flash-asr">Single-sentence Voice Recognition Interface Documentation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/bella-openapi/core/audio-transcriptions">音频文件转录接口文档</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/bella-openapi/core/tts">Speech Synthesis Interface Documentation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/en/docs/bella-openapi/core/realtime">Bella OpenAPI Real-time Voice Dialogue Interface Documentation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/bella-openapi/core/images-generage">Text-to-Image API Documentation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/bella-openapi/core/advanced-features">Advanced features</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/bella-openapi/core/document-parse">文档解析接口用户手册</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/en/docs/bella-openapi/features/claude-cache">特性介绍（Features Introduce）</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/en/docs/bella-openapi/tech/system-structure">技术文档（Tech Documents）</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/en/docs/bella-openapi/dev/login-spi">开发者文档（Dev Documents）</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/en/docs/claude-code/introduction">Claude Code With Bella</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/claude-code/introduction">导读（Introduction）</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/en/docs/claude-code/introduce/use-in-ide">快速使用（Quick Start）</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/en/docs/claude-code/tech/agent_design">技术分析（Tech Analysis）</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/en/docs/claude-code/case/tips">实践案例（cases）</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/en/docs/claude-code/share">经验分享（shares）</a></div></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/en/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">OpenAPI</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">使用文档 (Usage Documents)</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Bella OpenAPI Real-time Voice Dialogue Interface Documentation</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Bella OpenAPI Real-time Voice Dialogue Interface Documentation</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="table-of-contents">Table of Contents<a href="#table-of-contents" class="hash-link" aria-label="Direct link to Table of Contents" title="Direct link to Table of Contents">​</a></h2>
<ul>
<li><a href="#1-overview">1. Overview</a>
<ul>
<li><a href="#11-features">1.1 Features</a></li>
<li><a href="#12-application-scenarios">1.2 Application Scenarios</a></li>
</ul>
</li>
<li><a href="#2-interface-specifications">2. Interface Specifications</a>
<ul>
<li><a href="#21-basic-information">2.1 Basic Information</a></li>
<li><a href="#22-request-parameters">2.2 Request Parameters</a>
<ul>
<li><a href="#221-url-parameters">2.2.1 URL Parameters</a></li>
<li><a href="#222-websocket-startup-messages">2.2.2 WebSocket Startup Messages</a></li>
<li><a href="#223-audio-data-format">2.2.3 Audio Data Format</a></li>
</ul>
</li>
<li><a href="#23-response-message-types">2.3 Response Message Types</a>
<ul>
<li><a href="#231-transcription-related-messages">2.3.1 Transcription-related Messages</a></li>
<li><a href="#232-llm-related-messages">2.3.2 LLM-related Messages</a></li>
<li><a href="#233-speech-synthesis-related-messages">2.3.3 Speech Synthesis-related Messages</a></li>
<li><a href="#234-vad-related-messages">2.3.4 VAD-related Messages</a></li>
<li><a href="#235-session-control-and-error-messages">2.3.5 Session Control and Error Messages</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#3-implementation-guide">3. Implementation Guide</a>
<ul>
<li><a href="#31-java-implementation-example">3.1 Java Implementation Example</a></li>
<li><a href="#32-javascript-implementation-example">3.2 JavaScript Implementation Example</a></li>
<li><a href="#33-available-speech-synthesis-voices">3.3 Available Speech Synthesis Voices</a></li>
</ul>
</li>
<li><a href="#4-error-handling">4. Error Handling</a></li>
<li><a href="#5-best-practices">5. Best Practices</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-overview">1. Overview<a href="#1-overview" class="hash-link" aria-label="Direct link to 1. Overview" title="Direct link to 1. Overview">​</a></h2>
<p>The Real-time Voice Dialogue Interface provides an all-in-one solution for speech recognition, large language model conversation, and speech synthesis. It supports users inputting speech through a microphone in real-time, with the system automatically recognizing speech content, calling a large language model to generate responses, and converting the response content into speech output. The entire process is implemented through WebSocket protocol, featuring low latency and high real-time performance.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-features">1.1 Features<a href="#11-features" class="hash-link" aria-label="Direct link to 1.1 Features" title="Direct link to 1.1 Features">​</a></h3>
<ul>
<li><strong>Real-time Speech Recognition</strong>: Supports real-time speech input from users and converts speech to text</li>
<li><strong>Streaming Large Language Model Dialogue</strong>: Sends recognized text to a large language model and receives streaming responses</li>
<li><strong>Speech Synthesis</strong>: Converts large language model responses into speech, providing a natural voice dialogue experience</li>
<li><strong>Full-duplex Communication</strong>: Based on WebSocket protocol, supports full-duplex communication for true real-time dialogue</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="12-application-scenarios">1.2 Application Scenarios<a href="#12-application-scenarios" class="hash-link" aria-label="Direct link to 1.2 Application Scenarios" title="Direct link to 1.2 Application Scenarios">​</a></h3>
<ul>
<li>Intelligent voice assistants</li>
<li>Customer service chatbots</li>
<li>Voice interaction systems</li>
<li>Accessibility applications</li>
<li>In-vehicle voice systems</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-interface-specifications">2. Interface Specifications<a href="#2-interface-specifications" class="hash-link" aria-label="Direct link to 2. Interface Specifications" title="Direct link to 2. Interface Specifications">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="21-basic-information">2.1 Basic Information<a href="#21-basic-information" class="hash-link" aria-label="Direct link to 2.1 Basic Information" title="Direct link to 2.1 Basic Information">​</a></h3>
<ul>
<li><strong>Interface Path</strong>: <code>/v1/audio/realtime</code> or <code>/v1/audio/asr/stream</code> (returns only transcription events)</li>
<li><strong>Protocol</strong>: WebSocket</li>
<li><strong>Request Method</strong>: GET</li>
<li><strong>Authentication Method</strong>: Bearer Token (passed through the <code>Authorization</code> request header)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22-request-parameters">2.2 Request Parameters<a href="#22-request-parameters" class="hash-link" aria-label="Direct link to 2.2 Request Parameters" title="Direct link to 2.2 Request Parameters">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="221-url-parameters">2.2.1 URL Parameters<a href="#221-url-parameters" class="hash-link" aria-label="Direct link to 2.2.1 URL Parameters" title="Direct link to 2.2.1 URL Parameters">​</a></h4>
<table><thead><tr><th>Parameter</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>model</td><td>string</td><td>No</td><td>Specifies the model to use; if not specified, the default model for the capability will be used</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="222-websocket-startup-messages">2.2.2 WebSocket Startup Messages<a href="#222-websocket-startup-messages" class="hash-link" aria-label="Direct link to 2.2.2 WebSocket Startup Messages" title="Direct link to 2.2.2 WebSocket Startup Messages">​</a></h4>
<p>After establishing a connection, the client needs to send a startup message in JSON format:
For <code>/v1/audio/realtime</code>, the startup message is as follows:
For <code>/v1/audio/asr/stream</code>, the <code>llm_option</code> and <code>tts_option</code> parameters are not required</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="starttranscription-message">StartTranscription Message<a href="#starttranscription-message" class="hash-link" aria-label="Direct link to StartTranscription Message" title="Direct link to StartTranscription Message">​</a></h5>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;header&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;message_id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;uuid-string&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;task_id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;uuid-string&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;namespace&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;SpeechTranscriber&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;StartTranscription&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;appkey&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;default&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;payload&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;format&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;pcm&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;sample_rate&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">16000</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;enable_intermediate_result&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;enable_punctuation_prediction&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;enable_inverse_text_normalization&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;llm_option&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;main&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;model&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;qwen2.5-coder:3b&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;sys_prompt&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;You are a versatile voice assistant. Your responses will be converted to audio for the user, so please respond as concisely as possible, and end your first sentence quickly to better facilitate streaming speech synthesis.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;tts_option&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;model&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;chat-tts&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;sample_rate&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">24000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Parameter Description:</p>
<ul>
<li>
<p><strong>header</strong>: Message header information</p>
<ul>
<li><strong>message_id</strong>: Unique message identifier, UUID recommended</li>
<li><strong>task_id</strong>: Unique task identifier, UUID recommended</li>
<li><strong>namespace</strong>: Fixed as &quot;SpeechTranscriber&quot;</li>
<li><strong>name</strong>: Fixed as &quot;StartTranscription&quot;</li>
<li><strong>appkey</strong>: Fixed as &quot;default&quot;</li>
</ul>
</li>
<li>
<p><strong>payload</strong>: Task configuration parameters</p>
<ul>
<li><strong>format</strong>: Audio format, fixed as &quot;pcm&quot;</li>
<li><strong>sample_rate</strong>: Audio sampling rate, 16000 recommended</li>
<li><strong>enable_intermediate_result</strong>: Whether to enable intermediate results, true recommended</li>
<li><strong>enable_punctuation_prediction</strong>: Whether to enable punctuation prediction, true recommended</li>
<li><strong>enable_inverse_text_normalization</strong>: Whether to enable inverse text normalization, true recommended</li>
<li><strong>llm_option</strong>: Large language model options (optional)<!-- -->
<ul>
<li><strong>main</strong>: Main model configuration<!-- -->
<ul>
<li><strong>model</strong>: Model name, e.g., &quot;qwen2.5-coder:3b&quot;</li>
<li><strong>sys_prompt</strong>: System prompt, used to set the model&#x27;s behavior and role, can use Python Jinja2 templates</li>
<li><strong>prompt</strong>: User prompt, can provide Python Jinja2 templates to rewrite user messages sent to the large model through context</li>
<li><strong>temperature</strong>: Temperature parameter, controls the randomness of output, higher values increase randomness, range [0.0, 2.0], default is 1.0</li>
</ul>
</li>
<li><strong>workers</strong>: Worker model configuration list (optional), each worker model includes the following properties<!-- -->
<ul>
<li><strong>model</strong>: Model name</li>
<li><strong>blocking</strong>: Whether to block, default is false</li>
<li><strong>variable_name</strong>: Result variable name</li>
<li><strong>variable_type</strong>: Variable type</li>
<li><strong>sys_prompt</strong>: System prompt, can use Python Jinja2 templates</li>
<li><strong>prompt</strong>: User prompt, can use Python Jinja2 templates</li>
<li><strong>temperature</strong>: Temperature parameter, default is 1.0</li>
<li><strong>json_schema</strong>: JSON schema definition</li>
</ul>
</li>
</ul>
</li>
<li><strong>tts_option</strong>: Speech synthesis options (optional)<!-- -->
<ul>
<li><strong>model</strong>: Speech synthesis model, e.g., &quot;chat-tts&quot;</li>
<li><strong>sample_rate</strong>: Synthesis audio sampling rate, 24000 recommended</li>
<li><strong>voice</strong>: Synthesis voice (optional), available voices depend on the selected model</li>
</ul>
</li>
<li><strong>variables</strong>: Variable configuration (optional) map, used with prompt templates</li>
</ul>
</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-example">Configuration Example<a href="#configuration-example" class="hash-link" aria-label="Direct link to Configuration Example" title="Direct link to Configuration Example">​</a></h5>
<p>Below is a complete configuration example including main and worker models, showing how to use Jinja2 templates and variables for message rewriting:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;llm_option&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;main&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;model&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;qwen2.5-coder:3b&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;sys_prompt&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;You are a versatile voice assistant. Your responses will be converted to audio for the user, so please respond as concisely as possible, and end your first sentence quickly to better facilitate streaming speech synthesis.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;workers&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;model&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;qwen2.5-coder:3b&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;blocking&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;variable_name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;rewrite_user_message&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;sys_prompt&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;You are a user message rewrite expert, responsible for rewriting user messages transcribed from voice to make them more fluent and coherent, while also completing necessary reference disambiguation. Don&#x27;t explain, just rewrite. If no rewriting is needed, output the user&#x27;s original content directly.&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;prompt&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;## User Historical Dialogue\n&lt;history_messages&gt;\n{% for message in history_messages %}\n{% if message.role == \&quot;user\&quot; %}\n  &lt;user timestamp=\&quot;{{loop.index}}\&quot;&gt;{{{ message.content }}}&lt;/user&gt;\n{% elif message.role == \&quot;assistant\&quot; %}\n  &lt;agent timestamp=\&quot;{{loop.index}}\&quot;&gt;{{{ message.content }}}&lt;/agent&gt;\n{% endif %}\n{% endfor %}\n\n&lt;/history_messages&gt;\n\n## User Latest Message\n&lt;user_message&gt;\n  {{user_message}}\n&lt;/user_message&gt;\n\nPlease rewrite the message now!\n&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;tts_option&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;model&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;chat-tts&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;voice&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;zh_female&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;sample_rate&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">24000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This configuration example shows:</p>
<ol>
<li>Main model configuration: Using qwen2.5-coder:3b model for dialogue with users</li>
<li>Worker model configuration: Using the same model as a worker, responsible for rewriting user messages</li>
<li>Worker model using Jinja2 templates to process historical messages and current user messages</li>
<li>TTS configuration: Specifying model, voice, and sampling rate</li>
</ol>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="stoptranscription-message">StopTranscription Message<a href="#stoptranscription-message" class="hash-link" aria-label="Direct link to StopTranscription Message" title="Direct link to StopTranscription Message">​</a></h5>
<p>When you need to end a transcription task, the client needs to send a StopTranscription message:
After the server processes unfinished messages, it will return a SessionClose message.</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;header&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;message_id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;uuid-string&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;task_id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;uuid-string&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;namespace&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;SpeechTranscriber&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;StopTranscription&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;appkey&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;default&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;payload&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="223-audio-data">2.2.3 Audio Data<a href="#223-audio-data" class="hash-link" aria-label="Direct link to 2.2.3 Audio Data" title="Direct link to 2.2.3 Audio Data">​</a></h4>
<p>After sending the startup message, the client needs to continuously send audio data in binary format. Audio data requirements:</p>
<ul>
<li>Format: PCM (Pulse Code Modulation)</li>
<li>Sampling rate: 16000Hz</li>
<li>Bit depth: 16-bit</li>
<li>Channels: Single channel (mono)</li>
<li>Frame size: 3200 bytes recommended (corresponding to 100ms of audio)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="23-response-messages">2.3 Response Messages<a href="#23-response-messages" class="hash-link" aria-label="Direct link to 2.3 Response Messages" title="Direct link to 2.3 Response Messages">​</a></h3>
<p>The server will send various types of text messages and binary data through the WebSocket connection. Text messages are in JSON format and mainly include the following types:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="231-transcription-related-messages">2.3.1 Transcription-related Messages<a href="#231-transcription-related-messages" class="hash-link" aria-label="Direct link to 2.3.1 Transcription-related Messages" title="Direct link to 2.3.1 Transcription-related Messages">​</a></h4>
<ul>
<li><strong>TranscriptionStarted</strong>: Transcription task started</li>
<li><strong>SentenceBegin</strong>: Speech beginning detected</li>
<li><strong>TranscriptionResultChanged</strong>: Transcription result updated</li>
<li><strong>SentenceEnd</strong>: Speech sentence ended, includes final transcription result</li>
<li><strong>TranscriptionCompleted</strong>: Transcription task completed</li>
<li><strong>TranscriptionFailed</strong>: Transcription task failed</li>
</ul>
<p>Example:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;header&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;message_id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;uuid-string&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;task_id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;uuid-string&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;namespace&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;SpeechTranscriber&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;TranscriptionResultChanged&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;status&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">20000000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;payload&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;result&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Hello, I&#x27;d like to know what today&#x27;s weather is like&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="232-llm-related-messages">2.3.2 LLM-related Messages<a href="#232-llm-related-messages" class="hash-link" aria-label="Direct link to 2.3.2 LLM-related Messages" title="Direct link to 2.3.2 LLM-related Messages">​</a></h4>
<ul>
<li><strong>LLM_CHAT_BEGIN</strong>: Large model starts generating response</li>
<li><strong>LLM_CHAT_DELTA</strong>: Large model response content update</li>
<li><strong>LLM_CHAT_END</strong>: Large model response ended</li>
<li><strong>LLM_CHAT_CANCELLED</strong>: Large model response cancelled</li>
</ul>
<p>Example:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;header&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;message_id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;uuid-string&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;task_id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;uuid-string&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;namespace&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;SpeechTranscriber&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;LLM_CHAT_DELTA&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;status&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">20000000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;payload&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;data&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Hello! Today in Beijing, the weather is clear, with temperatures ranging from 22°C to 28°C, good air quality, and it&#x27;s a great day for outdoor activities.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="233-speech-synthesis-related-messages">2.3.3 Speech Synthesis-related Messages<a href="#233-speech-synthesis-related-messages" class="hash-link" aria-label="Direct link to 2.3.3 Speech Synthesis-related Messages" title="Direct link to 2.3.3 Speech Synthesis-related Messages">​</a></h4>
<ul>
<li><strong>TTS_BEGIN</strong>: Speech synthesis started</li>
<li><strong>TTS_TTFT</strong>: First audio data package ready (Time To First Token)</li>
<li><strong>TTS_DELTA</strong>: Speech synthesis incremental data</li>
<li><strong>TTS_END</strong>: Speech synthesis ended</li>
</ul>
<p>Speech synthesis audio data is sent through binary messages, in PCM format, with a sampling rate of 24000Hz, 16-bit, single channel.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="234-vad-related-messages-voice-activity-detection">2.3.4 VAD-related Messages (Voice Activity Detection)<a href="#234-vad-related-messages-voice-activity-detection" class="hash-link" aria-label="Direct link to 2.3.4 VAD-related Messages (Voice Activity Detection)" title="Direct link to 2.3.4 VAD-related Messages (Voice Activity Detection)">​</a></h4>
<ul>
<li><strong>VOICE_QUIET</strong>: Silence detected</li>
<li><strong>VOICE_STARTING</strong>: Start of speech detected</li>
<li><strong>VOICE_SPEAKING</strong>: Speaking detected</li>
<li><strong>VOICE_STOPPING</strong>: Stop speaking detected</li>
<li><strong>VOICE_PAUSING</strong>: Speech pause detected</li>
</ul>
<p>Example:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;header&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;message_id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;uuid-string&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;task_id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;uuid-string&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;namespace&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;SpeechTranscriber&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;VOICE_SPEAKING&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;status&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">20000000</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;status_message&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;GATEWAY|SUCCESS|Success.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;payload&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;start_frame&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">11</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;end_frame&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">29</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;duration&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">576</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;data&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token null keyword" style="font-style:italic">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;timestamp&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1744612674.163157</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;latency&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">-1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="235-session-control-and-error-messages">2.3.5 Session Control and Error Messages<a href="#235-session-control-and-error-messages" class="hash-link" aria-label="Direct link to 2.3.5 Session Control and Error Messages" title="Direct link to 2.3.5 Session Control and Error Messages">​</a></h4>
<ul>
<li><strong>SESSION_CLOSE</strong>: Session closed, after the client sends a StopTranscription message, the server will return a SessionClose message after processing unfinished messages.</li>
<li><strong>TASK_FAILED</strong>: Task failed</li>
<li><strong>LLM_CHAT_ERROR</strong>: LLM chat error</li>
<li><strong>LLM_WORKER_ERROR</strong>: LLM subtask error</li>
</ul>
<p>Example:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;header&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;message_id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;uuid-string&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;task_id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;uuid-string&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;namespace&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;SpeechTranscriber&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;SESSION_CLOSE&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;status&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">20000000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;payload&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-implementation-guide">3. Implementation Guide<a href="#3-implementation-guide" class="hash-link" aria-label="Direct link to 3. Implementation Guide" title="Direct link to 3. Implementation Guide">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="31-java-implementation-example">3.1 Java Implementation Example<a href="#31-java-implementation-example" class="hash-link" aria-label="Direct link to 3.1 Java Implementation Example" title="Direct link to 3.1 Java Implementation Example">​</a></h3>
<p>For Java implementation of the real-time voice interface, refer to the <a href="https://github.com/LianjiaTech/bella-openapi/blob/develop/api/server/src/test/java/com/ke/bella/openapi/RealtimeDemo.java" target="_blank" rel="noopener noreferrer">RealtimeDemo.java</a> class in the project.</p>
<p>This example demonstrates how to use the OkHttp library to implement WebSocket connections and complete the following functions:</p>
<ol>
<li>Establish a WebSocket connection and send a StartTranscription message</li>
<li>Send audio data (PCM format)</li>
<li>Process various event types (transcription, VAD, LLM, TTS, etc.)</li>
<li>Receive and process TTS audio data</li>
<li>Send a StopTranscription message to end the session</li>
</ol>
<p>The example includes complete error handling and resource release logic, which can serve as an implementation reference.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="32-javascript-implementation-example">3.2 JavaScript Implementation Example<a href="#32-javascript-implementation-example" class="hash-link" aria-label="Direct link to 3.2 JavaScript Implementation Example" title="Direct link to 3.2 JavaScript Implementation Example">​</a></h3>
<p>For JavaScript implementation of the real-time voice interface, refer to the <a href="https://github.com/LianjiaTech/bella-openapi/blob/develop/web/src/components/playground/RealtimeAudioRecorder.ts" target="_blank" rel="noopener noreferrer">RealtimeAudioRecorder.ts</a> class in the project.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="33-available-speech-synthesis-voices">3.3 Available Speech Synthesis Voices<a href="#33-available-speech-synthesis-voices" class="hash-link" aria-label="Direct link to 3.3 Available Speech Synthesis Voices" title="Direct link to 3.3 Available Speech Synthesis Voices">​</a></h3>
<p>Different models have different available voices. For details, please visit the bella-openapi homepage.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-error-handling">4. Error Handling<a href="#4-error-handling" class="hash-link" aria-label="Direct link to 4. Error Handling" title="Direct link to 4. Error Handling">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="41-common-error-codes">4.1 Common Error Codes<a href="#41-common-error-codes" class="hash-link" aria-label="Direct link to 4.1 Common Error Codes" title="Direct link to 4.1 Common Error Codes">​</a></h3>
<table><thead><tr><th>Error Code</th><th>Description</th><th>Solution</th></tr></thead><tbody><tr><td>401</td><td>Unauthorized</td><td>Check if the API Key is correct</td></tr><tr><td>403</td><td>Forbidden</td><td>Check API Key permissions</td></tr><tr><td>429</td><td>Too Many Requests</td><td>Reduce request frequency</td></tr><tr><td>500</td><td>Internal Server Error</td><td>Contact technical support</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="42-websocket-connection-errors">4.2 WebSocket Connection Errors<a href="#42-websocket-connection-errors" class="hash-link" aria-label="Direct link to 4.2 WebSocket Connection Errors" title="Direct link to 4.2 WebSocket Connection Errors">​</a></h3>
<table><thead><tr><th>Error Type</th><th>Possible Cause</th><th>Solution</th></tr></thead><tbody><tr><td>Connection Failed</td><td>Network issues or service unavailable</td><td>Check network connection, try again later</td></tr><tr><td>Connection Closed</td><td>Server closed connection or network interruption</td><td>Implement automatic reconnection mechanism</td></tr><tr><td>Message Parsing Error</td><td>Invalid JSON format</td><td>Check message format</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-best-practices">5. Best Practices<a href="#5-best-practices" class="hash-link" aria-label="Direct link to 5. Best Practices" title="Direct link to 5. Best Practices">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="51-audio-quality-optimization">5.1 Audio Quality Optimization<a href="#51-audio-quality-optimization" class="hash-link" aria-label="Direct link to 5.1 Audio Quality Optimization" title="Direct link to 5.1 Audio Quality Optimization">​</a></h3>
<ul>
<li>Use high-quality microphones, reduce environmental noise</li>
<li>Maintain appropriate volume and distance</li>
<li>Use noise reduction and echo cancellation technology</li>
<li>Ensure audio sampling rate and format meet requirements</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="52-performance-optimization">5.2 Performance Optimization<a href="#52-performance-optimization" class="hash-link" aria-label="Direct link to 5.2 Performance Optimization" title="Direct link to 5.2 Performance Optimization">​</a></h3>
<ul>
<li>Implement connection recovery mechanism</li>
<li>Optimize audio data processing and sending logic</li>
<li>Use WebWorker to process audio data, avoid blocking the main thread</li>
<li>Implement buffering mechanism to smooth network fluctuations</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="53-user-experience-optimization">5.3 User Experience Optimization<a href="#53-user-experience-optimization" class="hash-link" aria-label="Direct link to 5.3 User Experience Optimization" title="Direct link to 5.3 User Experience Optimization">​</a></h3>
<ul>
<li>Provide clear recording status indication</li>
<li>Display real-time transcription results, provide visual feedback</li>
<li>Implement voice activity detection, automatically start and end recording</li>
<li>Provide volume visualization to help users adjust volume</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="6-example-code">6. Example Code<a href="#6-example-code" class="hash-link" aria-label="Direct link to 6. Example Code" title="Direct link to 6. Example Code">​</a></h2>
<p>For complete frontend implementation examples, refer to the following files in the Bella OpenAPI project:</p>
<ul>
<li><code>web/src/app/playground/v1/audio/realtime/page.tsx</code>: Real-time voice dialogue page</li>
<li><code>web/src/components/playground/RealtimeAudioRecorder.ts</code>: Real-time voice recorder</li>
<li><code>web/src/components/playground/PCMPlayer.ts</code>: PCM audio player</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="7-frequently-asked-questions">7. Frequently Asked Questions<a href="#7-frequently-asked-questions" class="hash-link" aria-label="Direct link to 7. Frequently Asked Questions" title="Direct link to 7. Frequently Asked Questions">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="q1-why-is-my-speech-recognition-result-inaccurate">Q1: Why is my speech recognition result inaccurate?<a href="#q1-why-is-my-speech-recognition-result-inaccurate" class="hash-link" aria-label="Direct link to Q1: Why is my speech recognition result inaccurate?" title="Direct link to Q1: Why is my speech recognition result inaccurate?">​</a></h3>
<p>A1: This may be due to microphone quality, environmental noise, or network issues. It is recommended to use a high-quality microphone, use it in a quiet environment, and ensure stable network connection.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="q2-how-to-handle-compatibility-issues-with-different-browsers">Q2: How to handle compatibility issues with different browsers?<a href="#q2-how-to-handle-compatibility-issues-with-different-browsers" class="hash-link" aria-label="Direct link to Q2: How to handle compatibility issues with different browsers?" title="Direct link to Q2: How to handle compatibility issues with different browsers?">​</a></h3>
<p>A2: Use the WebRTC adapter library to handle compatibility issues across different browsers, and provide friendly prompts on unsupported browsers.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="q3-how-to-optimize-performance-on-mobile-devices">Q3: How to optimize performance on mobile devices?<a href="#q3-how-to-optimize-performance-on-mobile-devices" class="hash-link" aria-label="Direct link to Q3: How to optimize performance on mobile devices?" title="Direct link to Q3: How to optimize performance on mobile devices?">​</a></h3>
<p>A3: Reduce audio buffer size, optimize audio processing logic, use lower sampling rates, and implement battery optimization strategies.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="q4-how-to-handle-unstable-network-conditions">Q4: How to handle unstable network conditions?<a href="#q4-how-to-handle-unstable-network-conditions" class="hash-link" aria-label="Direct link to Q4: How to handle unstable network conditions?" title="Direct link to Q4: How to handle unstable network conditions?">​</a></h3>
<p>A4: Implement connection recovery mechanism, use audio buffering strategies, and resynchronize dialogue state after network recovery.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="q5-which-languages-does-the-system-support">Q5: Which languages does the system support?<a href="#q5-which-languages-does-the-system-support" class="hash-link" aria-label="Direct link to Q5: Which languages does the system support?" title="Direct link to Q5: Which languages does the system support?">​</a></h3>
<p>A5: Supported languages depend on the selected model. Please refer to the model documentation for the specific list of supported languages.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/en/docs/bella-openapi/core/tts"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Speech Synthesis Interface Documentation</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/en/docs/bella-openapi/core/images-generage"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Text-to-Image API Documentation</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#table-of-contents" class="table-of-contents__link toc-highlight">Table of Contents</a></li><li><a href="#1-overview" class="table-of-contents__link toc-highlight">1. Overview</a><ul><li><a href="#11-features" class="table-of-contents__link toc-highlight">1.1 Features</a></li><li><a href="#12-application-scenarios" class="table-of-contents__link toc-highlight">1.2 Application Scenarios</a></li></ul></li><li><a href="#2-interface-specifications" class="table-of-contents__link toc-highlight">2. Interface Specifications</a><ul><li><a href="#21-basic-information" class="table-of-contents__link toc-highlight">2.1 Basic Information</a></li><li><a href="#22-request-parameters" class="table-of-contents__link toc-highlight">2.2 Request Parameters</a></li><li><a href="#23-response-messages" class="table-of-contents__link toc-highlight">2.3 Response Messages</a></li></ul></li><li><a href="#3-implementation-guide" class="table-of-contents__link toc-highlight">3. Implementation Guide</a><ul><li><a href="#31-java-implementation-example" class="table-of-contents__link toc-highlight">3.1 Java Implementation Example</a></li><li><a href="#32-javascript-implementation-example" class="table-of-contents__link toc-highlight">3.2 JavaScript Implementation Example</a></li><li><a href="#33-available-speech-synthesis-voices" class="table-of-contents__link toc-highlight">3.3 Available Speech Synthesis Voices</a></li></ul></li><li><a href="#4-error-handling" class="table-of-contents__link toc-highlight">4. Error Handling</a><ul><li><a href="#41-common-error-codes" class="table-of-contents__link toc-highlight">4.1 Common Error Codes</a></li><li><a href="#42-websocket-connection-errors" class="table-of-contents__link toc-highlight">4.2 WebSocket Connection Errors</a></li></ul></li><li><a href="#5-best-practices" class="table-of-contents__link toc-highlight">5. Best Practices</a><ul><li><a href="#51-audio-quality-optimization" class="table-of-contents__link toc-highlight">5.1 Audio Quality Optimization</a></li><li><a href="#52-performance-optimization" class="table-of-contents__link toc-highlight">5.2 Performance Optimization</a></li><li><a href="#53-user-experience-optimization" class="table-of-contents__link toc-highlight">5.3 User Experience Optimization</a></li></ul></li><li><a href="#6-example-code" class="table-of-contents__link toc-highlight">6. Example Code</a></li><li><a href="#7-frequently-asked-questions" class="table-of-contents__link toc-highlight">7. Frequently Asked Questions</a><ul><li><a href="#q1-why-is-my-speech-recognition-result-inaccurate" class="table-of-contents__link toc-highlight">Q1: Why is my speech recognition result inaccurate?</a></li><li><a href="#q2-how-to-handle-compatibility-issues-with-different-browsers" class="table-of-contents__link toc-highlight">Q2: How to handle compatibility issues with different browsers?</a></li><li><a href="#q3-how-to-optimize-performance-on-mobile-devices" class="table-of-contents__link toc-highlight">Q3: How to optimize performance on mobile devices?</a></li><li><a href="#q4-how-to-handle-unstable-network-conditions" class="table-of-contents__link toc-highlight">Q4: How to handle unstable network conditions?</a></li><li><a href="#q5-which-languages-does-the-system-support" class="table-of-contents__link toc-highlight">Q5: Which languages does the system support?</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Document</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/en/docs/intro">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/en/api-viewer">API Docs</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/LianjiaTech/bella-openapi/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Issues<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">more</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/LianjiaTech/bella-openapi" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright 2025 LianjiaTech. Built on Docusaurus.</div></div></div></footer></div>
</body>
</html>