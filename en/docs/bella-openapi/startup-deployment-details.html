<!doctype html>
<html lang="en-US" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-bella-openapi/startup-deployment-details" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Bella OpenAPI Startup and Deployment Details | Bella Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://doc.bella.top/en/img/bella-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://doc.bella.top/en/img/bella-social-card.jpg"><meta data-rh="true" property="og:url" content="https://doc.bella.top/en/docs/bella-openapi/startup-deployment-details"><meta data-rh="true" property="og:locale" content="en_US"><meta data-rh="true" property="og:locale:alternate" content="zh_CN"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Bella OpenAPI Startup and Deployment Details | Bella Documentation"><meta data-rh="true" name="description" content="This document provides detailed information about the startup and deployment process of Bella OpenAPI, including prerequisites, service startup, environment variable configuration, service management, and system initialization."><meta data-rh="true" property="og:description" content="This document provides detailed information about the startup and deployment process of Bella OpenAPI, including prerequisites, service startup, environment variable configuration, service management, and system initialization."><link data-rh="true" rel="icon" href="/en/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://doc.bella.top/en/docs/bella-openapi/startup-deployment-details"><link data-rh="true" rel="alternate" href="https://doc.bella.top/docs/bella-openapi/startup-deployment-details" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://doc.bella.top/en/docs/bella-openapi/startup-deployment-details" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://doc.bella.top/docs/bella-openapi/startup-deployment-details" hreflang="x-default"><link rel="stylesheet" href="/en/assets/css/styles.4c251e4d.css">
<script src="/en/assets/js/runtime~main.f9c48b7f.js" defer="defer"></script>
<script src="/en/assets/js/main.fdbe671d.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbar--primary"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/en/"><div class="navbar__logo"><img src="/en/img/logo.svg" alt="Bella Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/en/img/logo.svg" alt="Bella Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Bella</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/en/docs/intro">Document</a><a class="navbar__item navbar__link" href="/en/api-viewer">API</a><a href="https://wiki.bella.top" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">DeepWiki<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item"><div id="github-star-button"></div></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/bella-openapi/startup-deployment-details" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-CN">中文 (简体)</a></li><li><a href="/en/docs/bella-openapi/startup-deployment-details" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en-US">English</a></li></ul></div><a href="https://github.com/LianjiaTech/bella-openapi" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/intro">介绍（Introduction）</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/en/docs/bella-openapi/intro">OpenAPI</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/bella-openapi/intro">介绍（Introduction）</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/en/docs/bella-openapi/configuration-details">配置与部署 (Configuration &amp; Deployment)</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/bella-openapi/configuration-details">Bella OpenAPI Configuration Details</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/en/docs/bella-openapi/startup-deployment-details">Bella OpenAPI Startup and Deployment Details</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/en/docs/bella-openapi/core/chat-completions">使用文档 (Usage Documents)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/en/docs/bella-openapi/features/claude-cache">特性介绍（Features Introduce）</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/en/docs/bella-openapi/tech/system-structure">技术文档（Tech Documents）</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/en/docs/bella-openapi/dev/login-spi">开发者文档（Dev Documents）</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/en/docs/claude-code/introduce/use-in-ide">Claude Code With Bella</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/en/docs/claude-code/introduce/use-in-ide">快速使用（Quick Start）</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/en/docs/claude-code/tech/agent_design">技术分析（Tech Analysis）</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/en/docs/claude-code/case/tips">实践案例（cases）</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/en/docs/claude-code/share">经验分享（shares）</a></div></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/en/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">OpenAPI</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">配置与部署 (Configuration &amp; Deployment)</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Bella OpenAPI Startup and Deployment Details</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Bella OpenAPI Startup and Deployment Details</h1></header>
<p>This document provides detailed information about the startup and deployment process of Bella OpenAPI, including prerequisites, service startup, environment variable configuration, service management, and system initialization.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="table-of-contents">Table of Contents<a href="#table-of-contents" class="hash-link" aria-label="Direct link to Table of Contents" title="Direct link to Table of Contents">​</a></h2>
<ul>
<li><a href="#project-overview">Project Overview</a>
<ul>
<li><a href="#project-structure">Project Structure</a></li>
<li><a href="#technology-stack">Technology Stack</a></li>
</ul>
</li>
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#starting-the-service">Starting the Service</a>
<ul>
<li><a href="#startup-options">Startup Options</a></li>
<li><a href="#startup-examples">Startup Examples</a></li>
</ul>
</li>
<li><a href="#docker-compose-environment-variable-configuration">Docker Compose Environment Variable Configuration</a>
<ul>
<li><a href="#environment-variable-priority">Environment Variable Priority</a></li>
<li><a href="#web-build-time-environment-variables">Web Build-time Environment Variables</a></li>
<li><a href="#web-runtime-environment-variables">Web Runtime Environment Variables</a></li>
</ul>
</li>
<li><a href="#service-management">Service Management</a>
<ul>
<li><a href="#stopping-the-service">Stopping the Service</a></li>
<li><a href="#viewing-logs">Viewing Logs</a></li>
<li><a href="#restarting-services">Restarting Services</a></li>
</ul>
</li>
<li><a href="#system-initialization">System Initialization</a>
<ul>
<li><a href="#generating-system-api-key">Generating System API Key</a>
<ul>
<li><a href="#usage">Usage</a></li>
<li><a href="#script-features">Script Features</a></li>
<li><a href="#important-notes">Important Notes</a></li>
<li><a href="#example-output">Example Output</a></li>
</ul>
</li>
<li><a href="#authorizing-administrators">Authorizing Administrators</a>
<ul>
<li><a href="#authorization-process">Authorization Process</a></li>
<li><a href="#manual-authorization">Manual Authorization</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#docker-image-management">Docker Image Management</a>
<ul>
<li><a href="#pushing-docker-images">Pushing Docker Images</a>
<ul>
<li><a href="#building-and-pushing-images">Building and Pushing Images</a></li>
<li><a href="#deploying-on-production-servers">Deploying on Production Servers</a></li>
<li><a href="#using-specific-image-versions">Using Specific Image Versions</a></li>
<li><a href="#important-considerations">Important Considerations</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="project-overview">Project Overview<a href="#project-overview" class="hash-link" aria-label="Direct link to Project Overview" title="Direct link to Project Overview">​</a></h2>
<p>Bella OpenAPI is a comprehensive AI open API platform providing the following main components:</p>
<ul>
<li>
<p><strong>Project Structure</strong>:</p>
<ul>
<li><code>api/</code>: Backend API service based on the Spring Boot framework</li>
<li><code>web/</code>: Frontend web application based on React and Next.js</li>
</ul>
</li>
<li>
<p><strong>Technology Stack</strong>:</p>
<ul>
<li>Backend: Java, Spring Boot, MySQL, Redis</li>
<li>Frontend: React, Next.js</li>
<li>Deployment: Docker, Docker Compose (requiring Docker Compose version 1.13.0+)</li>
<li>Gateway: Nginx (optional, automatically created in the container when using the startup script)</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h2>
<ul>
<li>Install <a href="https://www.docker.com/get-started" target="_blank" rel="noopener noreferrer">Docker</a></li>
<li>Install <a href="https://docs.docker.com/compose/install/" target="_blank" rel="noopener noreferrer">Docker Compose</a></li>
<li>Commands must be executed from the root directory of the bella-openapi project</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="starting-the-service">Starting the Service<a href="#starting-the-service" class="hash-link" aria-label="Direct link to Starting the Service" title="Direct link to Starting the Service">​</a></h2>
<p>When starting the service, you typically need to configure user login. See: <a href="/en/docs/bella-openapi/configuration-details#github-oauth-configuration-guide">GitHub OAuth Configuration Guide</a></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./start.sh </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">options</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">if no </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">local</span><span class="token plain"> image exists, it will pull from remote repository</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note:</p>
<ul>
<li>On Windows, please use Git Bash to execute commands</li>
<li>The startup script only supports a subset of configuration parameters, if you need to configure more parameters, you can modify the docker-compose.yml file or modify the application&#x27;s configuration file</li>
</ul>
<p>Options:</p>
<ul>
<li><code>-b, --build</code>: Rebuild services</li>
<li><code>-r, --rebuild</code>: Force rebuild services (without using cache)</li>
<li><code>-e, --env ENV</code>: Specify environment (dev, test, prod)</li>
<li><code>-h, --help</code>: Display help information</li>
<li><code>--skip-auth</code>: Skip authorization step</li>
<li><code>--server URL</code>: Configure service domain name</li>
<li><code>--github-oauth CLIENT_ID:CLIENT_SECRET</code>: Configure GitHub OAuth login</li>
<li><code>--google-oauth CLIENT_ID:CLIENT_SECRET</code>: Configure Google OAuth login</li>
<li><code>--cas-server URL</code>: Configure CAS server URL</li>
<li><code>--cas-login URL</code>: Configure CAS login URL</li>
<li><code>--proxy-host HOST</code>: Configure proxy server hostname or IP address</li>
<li><code>--proxy-port PORT</code>: Configure proxy server port</li>
<li><code>--proxy-type TYPE</code>: Configure proxy type (socks or http)</li>
<li><code>--proxy-domains DOMAINS</code>: Configure domains that need to be accessed through the proxy, separate multiple domains with commas</li>
<li><code>--version VERSION</code>: Specify image version</li>
<li><code>--push</code>: Push image to repository after building</li>
<li><code>--registry username</code>: Specify Docker repository (username)</li>
<li><code>--restart-web</code>: Restart only the frontend service</li>
<li><code>--restart-api</code>: Restart only the backend service</li>
<li><code>--nginx-port PORT</code>: Specify the port to which Nginx service is mapped, default is 80</li>
<li><code>--update-image</code>: Update image from remote repository, even if it exists locally</li>
<li><code>--service CONTAINER_NAME:DOMAIN:PORT</code>: Configure Nginx forwarding for additional services, format is service-name:domain<!-- -->:port<!-- -->, separate multiple services with commas, only supports services in the same Docker network, using CONTAINER_NAME for forwarding</li>
</ul>
<p>Examples:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./start.sh                       </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Start service without rebuilding, pulls remote image if no local image exists</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./start.sh </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-b</span><span class="token plain">                    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Start service and rebuild (uses cache, faster for incremental modifications)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./start.sh </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-r</span><span class="token plain">                    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Start service and force rebuild (without using cache)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./start.sh </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-e</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">test</span><span class="token plain">               </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Start service in test environment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./start.sh --skip-auth           </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Start service but skip authorization step</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./start.sh </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--server</span><span class="token plain"> http://example.com </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Configure service domain name</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./start.sh --proxy-host </span><span class="token number" style="color:rgb(247, 140, 108)">127.0</span><span class="token plain">.0.1 --proxy-port </span><span class="token number" style="color:rgb(247, 140, 108)">8118</span><span class="token plain"> --proxy-type http --proxy-domains github.com,google.com </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Configure HTTP proxy</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./start.sh --proxy-host proxy.com --proxy-port </span><span class="token number" style="color:rgb(247, 140, 108)">80</span><span class="token plain"> --proxy-type socks </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Configure SOCKS proxy without specifying domains</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># If you haven&#x27;t modified the source code and just want to pull the remote image and configure login methods and service domain, you can usually use the following commands:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Without domain configuration, typically for local deployment:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./start.sh --github-oauth </span><span class="token variable" style="color:rgb(191, 199, 213)">${clientId}</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token variable" style="color:rgb(191, 199, 213)">${secret}</span><span class="token plain"> --google-oauth </span><span class="token variable" style="color:rgb(191, 199, 213)">${clientId}</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token variable" style="color:rgb(191, 199, 213)">${secret}</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Configure GitHub and Google OAuth login</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># With domain configuration, typically for server deployment:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./start.sh --github-oauth </span><span class="token variable" style="color:rgb(191, 199, 213)">${clientId}</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token variable" style="color:rgb(191, 199, 213)">${secret}</span><span class="token plain"> --google-oauth </span><span class="token variable" style="color:rgb(191, 199, 213)">${clientId}</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token variable" style="color:rgb(191, 199, 213)">${secret}</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--server</span><span class="token plain"> http://example.com </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Configure GitHub and Google OAuth login and service domain</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># With domain and proxy configuration, for environments that need to access external services through a proxy:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./start.sh --github-oauth </span><span class="token variable" style="color:rgb(191, 199, 213)">${clientId}</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token variable" style="color:rgb(191, 199, 213)">${secret}</span><span class="token plain"> --google-oauth </span><span class="token variable" style="color:rgb(191, 199, 213)">${clientId}</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token variable" style="color:rgb(191, 199, 213)">${secret}</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--server</span><span class="token plain"> http://example.com --proxy-host </span><span class="token number" style="color:rgb(247, 140, 108)">127.0</span><span class="token plain">.0.1 --proxy-port </span><span class="token number" style="color:rgb(247, 140, 108)">8118</span><span class="token plain"> --proxy-type http --proxy-domains github.com,google.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./start.sh --cas-server https://cas.example.com --cas-login https://cas.example.com/login </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--server</span><span class="token plain"> http://example.com </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Configure CAS login and service domain; if both CAS and OAuth login are configured, CAS login will be used</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="docker-compose-environment-variable-configuration">Docker Compose Environment Variable Configuration<a href="#docker-compose-environment-variable-configuration" class="hash-link" aria-label="Direct link to Docker Compose Environment Variable Configuration" title="Direct link to Docker Compose Environment Variable Configuration">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="environment-variable-priority">Environment Variable Priority<a href="#environment-variable-priority" class="hash-link" aria-label="Direct link to Environment Variable Priority" title="Direct link to Environment Variable Priority">​</a></h3>
<p>In Docker environments, environment variables have the following priority from highest to lowest:</p>
<ol>
<li>environment settings in docker-compose.yml</li>
<li>ENV directives in Dockerfile</li>
<li>.env files, yaml files</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="web-build-time-environment-variables">Web Build-time Environment Variables<a href="#web-build-time-environment-variables" class="hash-link" aria-label="Direct link to Web Build-time Environment Variables" title="Direct link to Web Build-time Environment Variables">​</a></h3>
<p>Build-time environment variables are passed to Dockerfile through the args section of docker-compose.yml:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">build</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ./web</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> NODE_ENV=development</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> DEPLOY_ENV=development</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> SKIP_INSTALL=false</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>These variables affect the application build process. For example, Next.js will load different environment configuration files (.env.development, .env.production, etc.) based on the NODE_ENV value.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="web-runtime-environment-variables">Web Runtime Environment Variables<a href="#web-runtime-environment-variables" class="hash-link" aria-label="Direct link to Web Runtime Environment Variables" title="Direct link to Web Runtime Environment Variables">​</a></h3>
<p>Runtime environment variables are set through the environment section of docker-compose.yml:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">environment</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> NODE_ENV=development</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> DEPLOY_ENV=development</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>These variables take effect when the container is running, but for pre-built static files, only environment variables starting with NEXT_PUBLIC_ can be accessed on the client side.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="service-management">Service Management<a href="#service-management" class="hash-link" aria-label="Direct link to Service Management" title="Direct link to Service Management">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="stopping-the-service">Stopping the Service<a href="#stopping-the-service" class="hash-link" aria-label="Direct link to Stopping the Service" title="Direct link to Stopping the Service">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./stop.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Or directly use Docker Compose command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">docker-compose</span><span class="token plain"> down</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="viewing-logs">Viewing Logs<a href="#viewing-logs" class="hash-link" aria-label="Direct link to Viewing Logs" title="Direct link to Viewing Logs">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># View logs for all services</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">docker-compose</span><span class="token plain"> logs</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># View logs for specific services</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">docker-compose</span><span class="token plain"> logs api  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Backend API service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">docker-compose</span><span class="token plain"> logs web  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Frontend web application</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">docker-compose</span><span class="token plain"> logs mysql</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">docker-compose</span><span class="token plain"> logs redis</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># View logs in real-time</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">docker-compose</span><span class="token plain"> logs </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-f</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="restarting-services">Restarting Services<a href="#restarting-services" class="hash-link" aria-label="Direct link to Restarting Services" title="Direct link to Restarting Services">​</a></h3>
<p>You can use the start.sh script to restart specific services:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Restart frontend service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./start.sh --restart-web</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Restart backend service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./start.sh --restart-api --github-oauth </span><span class="token variable" style="color:rgb(191, 199, 213)">${clientId}</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token variable" style="color:rgb(191, 199, 213)">${secret}</span><span class="token plain"> --google-oauth </span><span class="token variable" style="color:rgb(191, 199, 213)">${clientId}</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token variable" style="color:rgb(191, 199, 213)">${secret}</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--server</span><span class="token plain"> http://example.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can also use Docker Compose commands directly:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Restart frontend service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">docker-compose</span><span class="token plain"> restart web</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># View frontend logs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">docker-compose</span><span class="token plain"> logs </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-f</span><span class="token plain"> web</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="system-initialization">System Initialization<a href="#system-initialization" class="hash-link" aria-label="Direct link to System Initialization" title="Direct link to System Initialization">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="generating-system-api-key">Generating System API Key<a href="#generating-system-api-key" class="hash-link" aria-label="Direct link to Generating System API Key" title="Direct link to Generating System API Key">​</a></h3>
<p>During system initialization, a system-level API Key needs to be generated for managing and accessing all API resources. We provide a script to automatically generate the system API Key and write it to the database.
The ./start.sh script will automatically generate this when starting the service. If you need to generate it manually, use the ./generate-system-apikey.sh script.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="usage">Usage<a href="#usage" class="hash-link" aria-label="Direct link to Usage" title="Direct link to Usage">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="execute-directly-in-docker-environment">Execute Directly in Docker Environment<a href="#execute-directly-in-docker-environment" class="hash-link" aria-label="Direct link to Execute Directly in Docker Environment" title="Direct link to Execute Directly in Docker Environment">​</a></h5>
<p>./generate-system-apikey.sh</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="use-custom-database-connection-parameters">Use Custom Database Connection Parameters<a href="#use-custom-database-connection-parameters" class="hash-link" aria-label="Direct link to Use Custom Database Connection Parameters" title="Direct link to Use Custom Database Connection Parameters">​</a></h5>
<p>DB_USER=bella_user DB_PASS=123456 ./generate-system-apikey.sh</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="script-features">Script Features<a href="#script-features" class="hash-link" aria-label="Direct link to Script Features" title="Direct link to Script Features">​</a></h4>
<ol>
<li>Check if a system API Key already exists in the database</li>
<li>If it doesn&#x27;t exist, generate a new system API Key and write it to the database</li>
<li>If it already exists, display information about the existing system API Key</li>
<li>Save the API Key information to the <code>system-apikey.txt</code> file</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="important-notes">Important Notes<a href="#important-notes" class="hash-link" aria-label="Direct link to Important Notes" title="Direct link to Important Notes">​</a></h4>
<ul>
<li>The system API Key has the highest privileges; please keep it secure</li>
<li>The API Key is displayed only once when generated; afterward, only a masked version can be seen</li>
<li>If you lose the API Key, you need to generate a new one; if it&#x27;s a system AK, you need to invalidate it and generate a new one</li>
<li>The generated API Key has the <code>all</code> role and can access all endpoints</li>
<li>The script needs to run in a Docker environment and will automatically connect to the MySQL container</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-output">Example Output<a href="#example-output" class="hash-link" aria-label="Direct link to Example Output" title="Direct link to Example Output">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Generating system API key...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Checking if system API key already exists in the database...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Inserting new system API key into the database...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Successfully generated and inserted system API key into the database.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">API Key Code: ak-026e84f5-8a1c-4243-a800-d44581f0f1b7</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">API Key: 9be9d54d-d4ae-4510-8819-a62a4e69e57b</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">API Key SHA-256: d58ed6447aa8da22d6fa3064d242f8f8dd74a6df4a1663084f4003b2d559b9ea</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">API Key Display: 9b****e57b</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">API key details have been saved to system-apikey.txt</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Important: Please keep this information secure, the API key will only be displayed once!</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Completed.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="authorizing-administrators">Authorizing Administrators<a href="#authorizing-administrators" class="hash-link" aria-label="Direct link to Authorizing Administrators" title="Direct link to Authorizing Administrators">​</a></h3>
<p>After system initialization, administrator users need to be authorized. Administrator users can manage API Keys, user permissions, and other system resources.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="authorization-process">Authorization Process<a href="#authorization-process" class="hash-link" aria-label="Direct link to Authorization Process" title="Direct link to Authorization Process">​</a></h4>
<ol>
<li>
<p>First, start the service and generate a system API Key</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./start.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If a new system API Key is generated, it will automatically enter the administrator authorization process. If you don&#x27;t want to authorize administrators during startup (system will still check if a system API Key needs to be generated), you can use the <code>--skip-auth</code> parameter:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./start.sh --skip-auth</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note: If an API Key already exists in the system, the script will automatically skip the administrator authorization step. Only when generating a new API Key for the first time will it ask whether you need to authorize an administrator.</p>
</li>
<li>
<p>The startup script will ask if you need to authorize an administrator</p>
<ul>
<li>If you choose &quot;yes&quot;, the script will guide you through the entire authorization process</li>
<li>If you choose &quot;no&quot;, you can manually run the authorization script later</li>
<li>If you used the <code>--skip-auth</code> parameter, the inquiry step will be skipped</li>
</ul>
</li>
<li>
<p>Follow the prompts to log in to the frontend page to get the user ID or email</p>
<ul>
<li>Visit <a href="http://localhost:3000" target="_blank" rel="noopener noreferrer">http://localhost:3000</a></li>
<li>Log in using a third-party account (such as Google, GitHub, etc.)</li>
<li>Click on the avatar in the upper right corner to view personal information and get the user ID or email</li>
</ul>
</li>
<li>
<p>The authorization script will start automatically; follow the prompts to enter user information</p>
<ul>
<li>You can choose to authorize using user ID or email</li>
<li>Follow the script prompts to enter relevant information</li>
</ul>
</li>
<li>
<p>If you need to authorize an administrator later, you can run:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./authorize-admin.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>After authorization, click on the avatar to log out of the system and log in again to have administrator privileges</p>
</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="manual-authorization">Manual Authorization<a href="#manual-authorization" class="hash-link" aria-label="Direct link to Manual Authorization" title="Direct link to Manual Authorization">​</a></h4>
<p>You can also use curl commands to authorize manually:</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="authorize-using-user-id">Authorize Using User ID<a href="#authorize-using-user-id" class="hash-link" aria-label="Direct link to Authorize Using User ID" title="Direct link to Authorize Using User ID">​</a></h5>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--location</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;http://localhost:8080/console/userInfo/manager&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--header</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;Authorization: Bearer YOUR_SYSTEM_API_KEY&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--header</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;Content-Type: application/json&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--data-raw </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    &quot;managerAk&quot;: &quot;YOUR_SYSTEM_API_KEY_CODE&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    &quot;userId&quot;: YOUR_USER_ID,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    &quot;userName&quot;: &quot;YOUR_USER_NAME&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">}&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="authorize-using-email">Authorize Using Email<a href="#authorize-using-email" class="hash-link" aria-label="Direct link to Authorize Using Email" title="Direct link to Authorize Using Email">​</a></h5>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--location</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;http://localhost:8080/console/userInfo/manager&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--header</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;Authorization: Bearer YOUR_SYSTEM_API_KEY&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--header</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;Content-Type: application/json&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--data-raw </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    &quot;managerAk&quot;: &quot;YOUR_SYSTEM_API_KEY_CODE&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    &quot;source&quot;: &quot;google&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    &quot;email&quot;: &quot;YOUR_EMAIL@gmail.com&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    &quot;userId&quot;: 0,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    &quot;userName&quot;: &quot;YOUR_USER_NAME&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">}&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="docker-image-management">Docker Image Management<a href="#docker-image-management" class="hash-link" aria-label="Direct link to Docker Image Management" title="Direct link to Docker Image Management">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="pushing-docker-images">Pushing Docker Images<a href="#pushing-docker-images" class="hash-link" aria-label="Direct link to Pushing Docker Images" title="Direct link to Pushing Docker Images">​</a></h3>
<p>To facilitate deployment in production environments, you can build and push Docker images to Docker Hub or other Docker repositories locally, and then directly pull and start these images on the server without having to build them on the server.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="building-and-pushing-images">Building and Pushing Images<a href="#building-and-pushing-images" class="hash-link" aria-label="Direct link to Building and Pushing Images" title="Direct link to Building and Pushing Images">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Build and push images to Docker Hub</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./start.sh </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--build</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--push</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--registry</span><span class="token plain"> username </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--version</span><span class="token plain"> v1.0.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Parameter explanation:</p>
<ul>
<li><code>--build</code>: Build Docker images</li>
<li><code>--push</code>: Push images to repository after building</li>
<li><code>--registry username</code>: Specify Docker Hub username</li>
<li><code>--version v1.0.0</code>: Specify image version number (default is v1.0.0)</li>
</ul>
<p>After executing this command, the script will:</p>
<ol>
<li>Build Docker images for API and Web services</li>
<li>Tag the images as <code>username/bella-openapi-api:v1.0.0</code> and <code>username/bella-openapi-web:v1.0.0</code></li>
<li>Also tag them as <code>username/bella-openapi-api:latest</code> and <code>username/bella-openapi-web:latest</code></li>
<li>Push these images to Docker Hub</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="deploying-on-production-servers">Deploying on Production Servers<a href="#deploying-on-production-servers" class="hash-link" aria-label="Direct link to Deploying on Production Servers" title="Direct link to Deploying on Production Servers">​</a></h4>
<p>On production servers, you can directly use the pushed images to start services:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Pull and start pushed images</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./start.sh </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--registry</span><span class="token plain"> username </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--version</span><span class="token plain"> v1.0.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This will pull the specified version of images from Docker Hub and start the services without having to build them on the server, greatly reducing deployment time and resource consumption.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="using-specific-image-versions">Using Specific Image Versions<a href="#using-specific-image-versions" class="hash-link" aria-label="Direct link to Using Specific Image Versions" title="Direct link to Using Specific Image Versions">​</a></h4>
<p>If you need to use a specific version of images, you can specify it using the <code>--version</code> parameter:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Use a specific version of images and configure your own login options</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./start.sh </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--registry</span><span class="token plain"> username </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--version</span><span class="token plain"> v1.1.0 --github-oauth CLIENT_ID:CLIENT_SECRET --google-oauth CLIENT_ID:CLIENT_SECRET </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--server</span><span class="token plain"> http://example.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="important-considerations">Important Considerations<a href="#important-considerations" class="hash-link" aria-label="Direct link to Important Considerations" title="Direct link to Important Considerations">​</a></h4>
<ol>
<li>
<p>Make sure you are logged in to Docker Hub:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">docker</span><span class="token plain"> login</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Before pushing images, ensure you have sufficient permissions to access the specified Docker Hub repository</p>
</li>
<li>
<p>In production environments, it is recommended to use specific version numbers rather than the <code>latest</code> tag to ensure consistency and traceability of deployments</p>
</li>
<li>
<p>If you are using a private Docker repository, adjust the <code>--registry</code> parameter accordingly</p>
</li>
</ol>
<hr>
<p><em>Last updated: 2025-03-31</em></p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/en/docs/bella-openapi/configuration-details"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Bella OpenAPI Configuration Details</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/en/docs/bella-openapi/core/chat-completions"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Intelligent Q&amp;A Interface Documentation</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#table-of-contents" class="table-of-contents__link toc-highlight">Table of Contents</a></li><li><a href="#project-overview" class="table-of-contents__link toc-highlight">Project Overview</a></li><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#starting-the-service" class="table-of-contents__link toc-highlight">Starting the Service</a></li><li><a href="#docker-compose-environment-variable-configuration" class="table-of-contents__link toc-highlight">Docker Compose Environment Variable Configuration</a><ul><li><a href="#environment-variable-priority" class="table-of-contents__link toc-highlight">Environment Variable Priority</a></li><li><a href="#web-build-time-environment-variables" class="table-of-contents__link toc-highlight">Web Build-time Environment Variables</a></li><li><a href="#web-runtime-environment-variables" class="table-of-contents__link toc-highlight">Web Runtime Environment Variables</a></li></ul></li><li><a href="#service-management" class="table-of-contents__link toc-highlight">Service Management</a><ul><li><a href="#stopping-the-service" class="table-of-contents__link toc-highlight">Stopping the Service</a></li><li><a href="#viewing-logs" class="table-of-contents__link toc-highlight">Viewing Logs</a></li><li><a href="#restarting-services" class="table-of-contents__link toc-highlight">Restarting Services</a></li></ul></li><li><a href="#system-initialization" class="table-of-contents__link toc-highlight">System Initialization</a><ul><li><a href="#generating-system-api-key" class="table-of-contents__link toc-highlight">Generating System API Key</a></li><li><a href="#authorizing-administrators" class="table-of-contents__link toc-highlight">Authorizing Administrators</a></li></ul></li><li><a href="#docker-image-management" class="table-of-contents__link toc-highlight">Docker Image Management</a><ul><li><a href="#pushing-docker-images" class="table-of-contents__link toc-highlight">Pushing Docker Images</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Document</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/en/docs/intro">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/en/api-viewer">API Docs</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/LianjiaTech/bella-openapi/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Issues<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">more</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/LianjiaTech/bella-openapi" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright 2025 LianjiaTech. Built on Docusaurus.</div></div></div></footer></div>
</body>
</html>