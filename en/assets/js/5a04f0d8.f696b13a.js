"use strict";(self.webpackChunkdocs_site=self.webpackChunkdocs_site||[]).push([[6743],{2436:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>s});const a=JSON.parse('{"id":"bella-openapi/dev/endpoint-console","title":"EndPoint Console Guide","description":"Due to the lack of a management page for Endpoint creation, an interface needs to be called.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/bella-openapi/dev/endpoint-console.md","sourceDirName":"bella-openapi/dev","slug":"/bella-openapi/dev/endpoint-console","permalink":"/en/docs/bella-openapi/dev/endpoint-console","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"documentationSidebar","previous":{"title":"Model Management Guide","permalink":"/en/docs/bella-openapi/dev/model-console"},"next":{"title":"Claude Code With Bella Openapi In IDE","permalink":"/en/docs/claude-code/"}}');var o=t(4848),r=t(8453);const i={},l="EndPoint Console Guide",c={},s=[{value:"Registration Endpoint",id:"registration-endpoint",level:2},{value:"1. Create a general category",id:"1-create-a-general-category",level:3},{value:"2. Search for categories and obtain codes",id:"2-search-for-categories-and-obtain-codes",level:3},{value:"3. Create a subcategory for knowledge retrieval and use the code from the previous step as the parentCode",id:"3-create-a-subcategory-for-knowledge-retrieval-and-use-the-code-from-the-previous-step-as-the-parentcode",level:3},{value:"4. Search the category tree, confirm success, and obtain the code",id:"4-search-the-category-tree-confirm-success-and-obtain-the-code",level:3},{value:"5 document_url",id:"5-document_url",level:3},{value:"7. Associate Endpoint with categories and use the code obtained in step four",id:"7-associate-endpoint-with-categories-and-use-the-code-obtained-in-step-four",level:3},{value:"8. Search the category tree and confirm its correctness",id:"8-search-the-category-tree-and-confirm-its-correctness",level:3},{value:"9. Page verification",id:"9-page-verification",level:3},{value:"External Endpoint",id:"external-endpoint",level:2},{value:"Channel maintenance (Optional)",id:"channel-maintenance-optional",level:3},{value:"Route (Optional)",id:"route-optional",level:3},{value:"Billing",id:"billing",level:3},{value:"1. Create billing script",id:"1-create-billing-script",level:4},{value:"2. Report logs",id:"2-report-logs",level:4}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"endpoint-console-guide",children:"EndPoint Console Guide"})}),"\n",(0,o.jsxs)(n.p,{children:["Due to the lack of a management page for Endpoint creation, an interface needs to be called.\n",(0,o.jsx)(n.strong,{children:"Attention"}),": When requesting an interface, the domain name should be replaced with the actual domain name used and managed using AK. If you do not have AK management permission, you can contact the project leader to obtain it\nAll non GET requests require userId and userName in the body, just fill in your own id and name. (Example request not provided)"]}),"\n",(0,o.jsx)(n.h2,{id:"registration-endpoint",children:"Registration Endpoint"}),"\n",(0,o.jsx)(n.h3,{id:"1-create-a-general-category",children:"1. Create a general category"}),"\n",(0,o.jsx)(n.p,{children:"Contact the project leader to confirm the current category."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"curl --location ' http://localhost:8080/console/category ' \\\n--header 'Authorization: Bearer ' \\\n--header 'Content-Type: application/json' \\\n--data '{\n'categoryName': 'Knowledge Base'\n}'\n"})}),"\n",(0,o.jsx)(n.h3,{id:"2-search-for-categories-and-obtain-codes",children:"2. Search for categories and obtain codes"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"curl --location ' http://localhost:8080/v1/meta/category/list?categoryName=%E7%9F%A5%E8%AF%86%E5%BA%93 ' \\\n--header 'Authorization: Bearer '\n"})}),"\n",(0,o.jsx)(n.h3,{id:"3-create-a-subcategory-for-knowledge-retrieval-and-use-the-code-from-the-previous-step-as-the-parentcode",children:"3. Create a subcategory for knowledge retrieval and use the code from the previous step as the parentCode"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"curl --location ' http://localhost:8080/console/category ' \\\n--header 'Authorization: Bearer ' \\\n--header 'Content-Type: application/json' \\\n--data '{\n'categoryName': 'Knowledge Retrieval',\n\"parentCode\": \"0004\"\n}'\n"})}),"\n",(0,o.jsx)(n.h3,{id:"4-search-the-category-tree-confirm-success-and-obtain-the-code",children:"4. Search the category tree, confirm success, and obtain the code"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"curl --location ' http://localhost:8080/v1/meta/category/tree?includeEndpoint=true&status=active&categoryCode=0004 ' \\\n--header 'Authorization: Bearer ' \n"})}),"\n",(0,o.jsx)(n.h3,{id:"5-document_url",children:"5 document_url"}),"\n",(0,o.jsx)(n.p,{children:"Document_url is used for displaying non model Endpoint and can be accessed through the doc.bella.top document page\n###6. Create Rag Endpoint"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:'curl --location \' http://localhost:8080/console/endpoint \' \\\n--header \'Authorization: Bearer \' \\\n--header \'Content-Type: application/json\' \\\n--data \'{\n"endpoint":"/v1/rag",\nEndpoint Name ":" Retrieval Enhanced Generation ",\nMaintainerCde ":" User System ID/ID ",\n"maintainerName": "lzl",\n"documentUrl": " https://doc.weixin.qq.com/doc/w3_AagAxwZdAD4GZVGEZO0QPiO8m8wC1?scode=AJMA1Qc4AAw0vPEnJ8 "\n}\'\n'})}),"\n",(0,o.jsx)(n.h3,{id:"7-associate-endpoint-with-categories-and-use-the-code-obtained-in-step-four",children:"7. Associate Endpoint with categories and use the code obtained in step four"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"curl --location ' http://localhost:8080/console/endpoint/category ' \\\n--header 'Authorization: Bearer ' \\\n--header 'Content-Type: application/json' \\\n--data '{\n\"endpoint\":\"/v1/rag\",\n\"categoryCodes\": [\"0004-0001\"]\n}'\n"})}),"\n",(0,o.jsx)(n.h3,{id:"8-search-the-category-tree-and-confirm-its-correctness",children:"8. Search the category tree and confirm its correctness"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"curl --location ' http://localhost:8080/v1/meta/category/tree?includeEndpoint=true&status=active&categoryCode=0004 ' \\\n--header 'Authorization: Bearer ' \n"})}),"\n",(0,o.jsx)(n.h3,{id:"9-page-verification",children:"9. Page verification"}),"\n",(0,o.jsx)(n.h2,{id:"external-endpoint",children:"External Endpoint"}),"\n",(0,o.jsx)(n.p,{children:"**Note * *: External Endpoint refer to Endpoint that are not forwarded through the Bella openAPI service. Cost information is maintained in one's own service or obtained through the routing function of OpenAPI."}),"\n",(0,o.jsx)(n.h3,{id:"channel-maintenance-optional",children:"Channel maintenance (Optional)"}),"\n",(0,o.jsx)(n.p,{children:"For detailed information on channels, please refer to the Channel Management API (model console. md # Channel Management API)"}),"\n",(0,o.jsx)(n.h3,{id:"route-optional",children:"Route (Optional)"}),"\n",(0,o.jsx)(n.p,{children:"**Explanation: External Endpoint can implement channel protocols on their own, but can use OpenAPI to implement channel routing and management."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:'curl --location --request POST \' http://localhost:8080/v1/route \' \\\n--Header \'Authorization: Bearer {apikey for service management}\'\\\n--header \'Content-Type: application/json\' \\\n--data \'{\nApikey ":" Apikey used for user Endpoint requests "\n"endpoint":"/v1/rag",\nModel ":" No model, can be null "\n}\'\n'})}),"\n",(0,o.jsx)(n.p,{children:"Response:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "channelCode": "channelCode",\n  "entityType": " endpoint or model ",\n  "entityCode ": " Endpoint path or model name ",\n  "protocol": " Forwarding Protocol ",\n  "url": "Forwarding URL",\n  "channelInfo": "Channel Information",\n  "priceInfo": "Price Information"\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"billing",children:"Billing"}),"\n",(0,o.jsx)(n.h4,{id:"1-create-billing-script",children:"1. Create billing script"}),"\n",(0,o.jsx)(n.p,{children:"Request for billing script example"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:'curl --location --request PUT \' http://localhost:8080/console/endpoint \' \\\n--header \'Authorization: Bearer \' \\\n--header \'Content-Type: application/json\' \\\n--data \'{\n"endpoint":"/v1/rag",\n"costScript": "price.price * usage",\n"testPriceInfo":"{\\"price\\": 10.000}",\n"testUsage": 100,\n"userId":0,\n"userName":"system"\n}\'\n'})}),"\n",(0,o.jsx)(n.p,{children:"Use Groovy scripts for billing.\nTestPriceInfo and testUsage are test data used to validate scripts"}),"\n",(0,o.jsx)(n.h4,{id:"2-report-logs",children:"2. Report logs"}),"\n",(0,o.jsx)(n.p,{children:"java sdk:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-xml",children:"<dependency>\n<groupId>top.bella</groupId>\n<artifactId>sdk</artifactId>\n<version>{Maven repository retrieves the latest version}</version>\n</dependency>\n"})}),"\n",(0,o.jsx)(n.p,{children:"**Usage * *: com. ke. bella. openapi. client. openapiClient # log\nhttp:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:'curl --location \' http://localhost:8080/v1/log \' \\\n--header \'Authorization: Bearer \' \\\n--header \'Content-Type: application/json\' \\\n--data \'{\n"endpint": "/v1/rag",\n"bellaTraceId":"111111",\n"akSha": "aaaaaa", //sha256 hash\n"priceInfo": "{\\"price\\": 10.000}",\n"usage": 100\n}\'\n'})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>l});var a=t(6540);const o={},r=a.createContext(o);function i(e){const n=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);