"use strict";(self.webpackChunkdocs_site=self.webpackChunkdocs_site||[]).push([[8390],{3619:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>a,frontMatter:()=>c,metadata:()=>i,toc:()=>u});const i=JSON.parse('{"id":"claude-code/introduce/use-in-github","title":"GitHub\u4f7f\u7528\u914d\u7f6e","description":"\u6982\u8ff0","source":"@site/docs/claude-code/introduce/use-in-github.md","sourceDirName":"claude-code/introduce","slug":"/claude-code/introduce/use-in-github","permalink":"/docs/claude-code/introduce/use-in-github","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"documentationSidebar","previous":{"title":"IDE\u4f7f\u7528\u914d\u7f6e","permalink":"/docs/claude-code/introduce/use-in-ide"},"next":{"title":"\u7f16\u7a0b\u65b9\u5f0f\u8c03\u7528","permalink":"/docs/claude-code/introduce/use-in-code"}}');var t=s(4848),l=s(8453);const c={},r="GitHub\u4f7f\u7528\u914d\u7f6e",d={},u=[{value:"\u6982\u8ff0",id:"\u6982\u8ff0",level:2},{value:"\u6838\u5fc3\u4f18\u52bf",id:"\u6838\u5fc3\u4f18\u52bf",level:2},{value:"\u914d\u7f6e\u8981\u6c42",id:"\u914d\u7f6e\u8981\u6c42",level:2},{value:"1. GitHub Secrets \u914d\u7f6e",id:"1-github-secrets-\u914d\u7f6e",level:3},{value:"2. \u5de5\u4f5c\u6d41\u6743\u9650",id:"2-\u5de5\u4f5c\u6d41\u6743\u9650",level:3},{value:"\u914d\u7f6e\u6d41\u7a0b",id:"\u914d\u7f6e\u6d41\u7a0b",level:2},{value:"\u529f\u80fd\u7528\u6cd5\u53ca\u5c55\u793a",id:"\u529f\u80fd\u7528\u6cd5\u53ca\u5c55\u793a",level:2},{value:"\u89e3\u51b3issues:",id:"\u89e3\u51b3issues",level:3},{value:"Code Review:",id:"code-review",level:2},{value:"\u6545\u969c\u6392\u9664",id:"\u6545\u969c\u6392\u9664",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"github\u4f7f\u7528\u914d\u7f6e",children:"GitHub\u4f7f\u7528\u914d\u7f6e"})}),"\n",(0,t.jsx)(n.h2,{id:"\u6982\u8ff0",children:"\u6982\u8ff0"}),"\n",(0,t.jsx)(n.p,{children:"\u672c\u6587\u6863\u4ecb\u7ecd\u5982\u4f55\u5728GitHub Actions\u4e2d\u96c6\u6210Claude Code\u3002\u901a\u8fc7GitHub Actions\uff0c\u53ef\u4ee5\u5728merger request\u6216\u521b\u5efaissues\u65f6\u81ea\u52a8\u89e6\u53d1Claude Code\u6267\u884c\u76f8\u5173\u64cd\u4f5c\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"\u6838\u5fc3\u4f18\u52bf",children:"\u6838\u5fc3\u4f18\u52bf"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u81ea\u52a8\u5316\u4ee3\u7801\u5ba1\u67e5"}),": \u5728PR\u4e2d\u81ea\u52a8\u5206\u6790\u4ee3\u7801\u8d28\u91cf\uff0c\u63d0\u4f9b\u6539\u8fdb\u5efa\u8bae"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Issues\u81ea\u52a8\u89e3\u51b3"}),": \u5f53Issues\u88ab\u521b\u5efa\u540e\uff0c\u53ef\u7acb\u5373\u81ea\u52a8\u5904\u7406"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u6587\u6863\u81ea\u52a8\u66f4\u65b0"}),": \u53ef\u4ee5\u6269\u5c55GitHub Action\u5b9e\u73b0\u9879\u76ee\u6587\u6863\u7684\u81ea\u52a8\u66f4\u65b0"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u5b89\u5168\u6f0f\u6d1e\u68c0\u6d4b"}),": \u81ea\u52a8\u626b\u63cf\u6f5c\u5728\u7684\u5b89\u5168\u95ee\u9898"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"\u914d\u7f6e\u8981\u6c42",children:"\u914d\u7f6e\u8981\u6c42"}),"\n",(0,t.jsx)(n.h3,{id:"1-github-secrets-\u914d\u7f6e",children:"1. GitHub Secrets \u914d\u7f6e"}),"\n",(0,t.jsx)(n.p,{children:"\u5728\u4ed3\u5e93\u7684Settings -> Secrets and variables -> Actions\u4e2d\u6dfb\u52a0\u4ee5\u4e0bsecrets\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-Bash",children:"ANTHROPIC_BASE_URL    # Bella OpenAPI\u7684\u57fa\u7840URL\nANTHROPIC_AUTH_TOKEN  # API\u8bbf\u95ee\u4ee4\u724c\n"})}),"\n",(0,t.jsx)(n.h3,{id:"2-\u5de5\u4f5c\u6d41\u6743\u9650",children:"2. \u5de5\u4f5c\u6d41\u6743\u9650"}),"\n",(0,t.jsx)(n.p,{children:"\u786e\u4fddGitHub Actions\u4f7f\u7528\u7684Tokens\u5177\u6709\u5fc5\u8981\u7684\u6743\u9650\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"permissions:\n  contents: Read And Write\n  pull-requests: Read And Write\n  issues: Read And Write\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\u914d\u7f6e\u6d41\u7a0b",children:"\u914d\u7f6e\u6d41\u7a0b"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"# \u8fdb\u5165\u9879\u76ee\u76ee\u5f55\nmkdir -p .github/workflows\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u6838\u5fc3Actions:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"#Job: Run Claude Code\u4e2d\u7684model\u548cANTHROPIC_SMALL_FAST_MODEL\u66ff\u6362\u4e3a\u81ea\u5df1\u4f7f\u7528\u7684\u6a21\u578b\u540d\ncat > .github/workflows/claude.yml << 'EOF'\nname: Claude Code\n\non:\n  issue_comment:\n    types: [created]\n  pull_request_review_comment:\n    types: [created]\n  issues:\n    types: [opened, assigned]\n  pull_request_review:\n    types: [submitted]\n\njobs:\n  claude:\n    if: |\n      (github.event_name == 'issue_comment' && contains(github.event.comment.body, '@claude')) ||\n      (github.event_name == 'pull_request_review_comment' && contains(github.event.comment.body, '@claude')) ||\n      (github.event_name == 'pull_request_review' && contains(github.event.review.body, '@claude')) ||\n      (github.event_name == 'issues' && (contains(github.event.issue.body, '@claude') || contains(github.event.issue.title, '@claude')))\n    runs-on: ubuntu-latest\n    permissions:\n      contents: write\n      pull-requests: write\n      issues: write\n      id-token: write\n    steps:\n      - name: Get PR details\n        id: pr\n        uses: actions/github-script@v7\n        if: github.event_name == 'issue_comment' && github.event.issue.pull_request\n        with:\n          github-token: ${{ secrets.GIT_TOKEN }}\n          script: |\n            const { data: pr } = await github.rest.pulls.get({\n              owner: context.repo.owner,\n              repo: context.repo.repo,\n              pull_number: context.issue.number\n            });\n            core.setOutput('head_sha', pr.head.sha);\n            core.setOutput('head_ref', pr.head.ref);\n            core.setOutput('head_repo', pr.head.repo.full_name);\n\n      - name: Checkout repository\n        uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683  # v4\n        with:\n          repository: ${{ steps.pr.outputs.head_repo || github.repository }}\n          ref: ${{ steps.pr.outputs.head_sha || github.sha }}\n          fetch-depth: 0\n          token: ${{ secrets.GIT_TOKEN }}\n\n      - name: Run Claude Code\n        id: claude\n        uses: anthropics/claude-code-action@beta\n        with:\n          model: \"claude-4-sonnet\"\n          github_token: ${{ secrets.GIT_TOKEN }}\n          anthropic_api_key: ${{ secrets.ANTHROPIC_AUTH_TOKEN }}\n          claude_env: |\n            ANTHROPIC_AUTH_TOKEN: ${{ secrets.ANTHROPIC_AUTH_TOKEN }}\n            ANTHROPIC_SMALL_FAST_MODEL: claude-3-5-haiku\n            CLAUDE_CODE_MAX_OUTPUT_TOKENS: 64000\n        env:\n          ANTHROPIC_BASE_URL: ${{ secrets.ANTHROPIC_BASE_URL }}\nEOF\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u81ea\u52a8\u89e6\u53d1PR:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"# \u5c06 branches \u6539\u4e3a\u4ee3\u7801\u4ed3\u4e2d\u7684\u9ed8\u8ba4\u5206\u652f\ncat > .github/workflows/auto-review.yml << 'EOF'\nname: Auto Review Request\n\non:\n  pull_request_target:\n    types: [opened]\n    branches: [develop]\n\njobs:\n  auto-comment:\n    runs-on: ubuntu-latest\n    permissions:\n      pull-requests: write\n    steps:\n      - name: Add review request comment\n        uses: actions/github-script@v7\n        with:\n          github-token: ${{ secrets.GIT_TOKEN }}\n          script: |\n            github.rest.issues.createComment({\n              issue_number: context.issue.number,\n              owner: context.repo.owner,\n              repo: context.repo.repo,\n              body: '@claude \u68c0\u67e5\u63d0\u4ea4\u7684\u4ee3\u7801\uff0c\u4f7f\u7528\u4e2d\u6587\u56de\u590d'\n            })\nEOF\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\u529f\u80fd\u7528\u6cd5\u53ca\u5c55\u793a",children:"\u529f\u80fd\u7528\u6cd5\u53ca\u5c55\u793a"}),"\n",(0,t.jsx)(n.h3,{id:"\u89e3\u51b3issues",children:"\u89e3\u51b3issues:"}),"\n",(0,t.jsxs)(n.p,{children:["\u5728issues\u7684\u6807\u9898\u3001body\u3001comment\u4e2d ",(0,t.jsx)(n.code,{children:"@claude"})," \u5747\u4f1a\u89e6\u53d1\u3002\u53ef\u4ee5\u5b9e\u73b0\u4ee3\u7801\uff0c\u4e5f\u53ef\u4ee5\u5411\u5176\u54a8\u8be2\u95ee\u9898\u3002"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u4f7f\u7528\u793a\u4f8b\uff1a","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/LianjiaTech/bella-openapi/issues/59",children:"Bella-Openapi\u5b9e\u73b0\u7a7a\u95f2\u62c9\u53d6\u4efb\u52a1\u6a21\u5f0f"})," \u590d\u6742\u95ee\u9898\uff0c\u5148\u54a8\u8be2\u95ee\u9898\uff08\u589e\u52a0\u601d\u8003\u8fc7\u7a0b\uff09\uff0c\u540e\u5199\u4ee3\u7801"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/LianjiaTech/bella-openapi/issues/89",children:"Bella-Openapi\u652f\u6301apikey\u7ed1\u5b9aservice_id"})," \u7b80\u5355\u95ee\u9898\uff0c\u76f4\u63a5\u5199\u4ee3\u7801"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"code-review",children:"Code Review:"}),"\n",(0,t.jsxs)(n.p,{children:["\u5728MR\u7684body\u3001comment\u4e2d",(0,t.jsx)(n.code,{children:"@claude"}),"\u5747\u4f1a\u89e6\u53d1\uff0c\u6dfb\u52a0",(0,t.jsx)(n.code,{children:"auto-review.yml"}),"\u540e\u63d0MR\u4f1a\u81ea\u52a8\u89e6\u53d1CR\u3002"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"CR\u751f\u6210\u7684\u5185\u5bb9\u5927\u81f4\u5305\u542b\uff1a\u4ee3\u7801\u4fee\u6539\u603b\u7ed3\u3001\u4f18\u70b9\u3001\u95ee\u9898\u3001\u4fee\u6539\u5efa\u8bae/\u76f4\u63a5merge\u3002"}),"\n",(0,t.jsxs)(n.li,{children:["\u5bf9CR\u7684\u4fee\u6539\u5efa\u8bae\u6709\u7591\u95ee\uff0c\u53ef\u4ee5\u5728comment\u4e2d",(0,t.jsx)(n.code,{children:"@claude"}),"\u8fdb\u884c\u786e\u8ba4\u6216\u7ea0\u6b63\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:["\u5982\u679c\u91c7\u7eb3\u5efa\u8bae\uff0c\u53ef\u4ee5\u76f4\u63a5\u590d\u5236\u4fee\u6539\u5efa\u8bae\u5728comment\u4e2d",(0,t.jsx)(n.code,{children:"@claude"}),"\uff0c\u544a\u77e5\u5176\u8fdb\u884c\u4fee\u6539\u3002\u6216\u8005\u5c06\u4fee\u6539\u5efa\u8bae\u590d\u5236\u5230\u672c\u5730\u7684Claude Code Cli\uff0c\u8ba9\u5176\u5e2e\u52a9\u5b9e\u73b0\u4ee3\u7801\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:["\u4fee\u6539\u6d4b\u8bd5\u5b8c\u6bd5\u540e\uff0c\u5728comment\u4e2d",(0,t.jsx)(n.code,{children:"@claude"}),"\u544a\u77e5\u5176\u518d\u6b21CR\u3002\u4f8b\u5982",(0,t.jsx)(n.code,{children:"\u4fee\u6539\u5b8c\u6210xxxx\uff0c\u8bf7\u518d\u6b21Review"})]}),"\n",(0,t.jsxs)(n.li,{children:["\u4f7f\u7528\u793a\u4f8b\uff1a","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/LianjiaTech/bella-openapi/pull/87",children:"Bella-Openapi\u9002\u914dnative message api"})," CR\u5efa\u8bae\u4fee\u6539 -> \u5bf9\u5efa\u8bae\u63d0\u51fa\u7ea0\u6b63 -> \u8fbe\u6210\u4e00\u81f4 -> update -> CR"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/LianjiaTech/bella-openapi/pull/90",children:"Bella-Openapi\u652f\u6301apikey\u7ed1\u5b9aservice_id"})," CR\u5efa\u8bae\u76f4\u63a5merge"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"\u6545\u969c\u6392\u9664",children:"\u6545\u969c\u6392\u9664"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u8ba4\u8bc1\u5931\u8d25"}),": \u68c0\u67e5ANTHROPIC_AUTH_TOKEN\u662f\u5426\u6b63\u786e\u914d\u7f6e"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u6743\u9650\u4e0d\u8db3"}),": \u786e\u4fddGitHub Actions\u5177\u6709\u5fc5\u8981\u7684\u4ed3\u5e93\u6743\u9650"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"\u901a\u8fc7\u5408\u7406\u914d\u7f6eGitHub Actions\u548cClaude Code\uff0c\u53ef\u4ee5\u663e\u8457\u63d0\u5347\u5f00\u53d1\u6548\u7387\uff0c\u5b9e\u73b0\u771f\u6b63\u7684AI\u9a71\u52a8\u5f00\u53d1\u5de5\u4f5c\u6d41\u3002"})]})}function a(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>r});var i=s(6540);const t={},l=i.createContext(t);function c(e){const n=i.useContext(l);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);