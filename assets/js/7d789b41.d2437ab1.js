"use strict";(self.webpackChunkdocs_site=self.webpackChunkdocs_site||[]).push([[6007],{3952:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>o,frontMatter:()=>l,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"bella-queue/api/queue/take","title":"\u83b7\u53d6\u4efb\u52a1","description":"POST http(s)://{}/v1/queue/take","source":"@site/docs/bella-queue/api/queue/take.md","sourceDirName":"bella-queue/api/queue","slug":"/bella-queue/api/queue/take","permalink":"/docs/bella-queue/api/queue/take","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"documentationSidebar","previous":{"title":"\u63d0\u4ea4\u4efb\u52a1","permalink":"/docs/bella-queue/api/queue/put"},"next":{"title":"\u5b8c\u6210\u4efb\u52a1","permalink":"/docs/bella-queue/api/queue/complete"}}');var t=s(4848),r=s(8453);const l={},d="\u83b7\u53d6\u4efb\u52a1",c={},a=[{value:"\u793a\u4f8b",id:"\u793a\u4f8b",level:2},{value:"\u79bb\u7ebf\u4efb\u52a1\u793a\u4f8b",id:"\u79bb\u7ebf\u4efb\u52a1\u793a\u4f8b",level:3},{value:"\u5728\u7ebf\u4efb\u52a1\u793a\u4f8b",id:"\u5728\u7ebf\u4efb\u52a1\u793a\u4f8b",level:3},{value:"Request Body Parameters",id:"request-body-parameters",level:2},{value:"Queue Strategies (\u961f\u5217\u7b56\u7565)",id:"queue-strategies-\u961f\u5217\u7b56\u7565",level:2},{value:"fifo\u7b56\u7565",id:"fifo\u7b56\u7565",level:3},{value:"round_robin\u7b56\u7565",id:"round_robin\u7b56\u7565",level:3},{value:"active_passive\u7b56\u7565",id:"active_passive\u7b56\u7565",level:3},{value:"sequential\u7b56\u7565",id:"sequential\u7b56\u7565",level:3},{value:"Returns",id:"returns",level:2},{value:"\u5b57\u6bb5\u5dee\u5f02\u8bf4\u660e",id:"\u5b57\u6bb5\u5dee\u5f02\u8bf4\u660e",level:3}];function h(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"\u83b7\u53d6\u4efb\u52a1",children:"\u83b7\u53d6\u4efb\u52a1"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"POST"})," ",(0,t.jsx)(n.code,{children:"http(s)://{{Host}}/v1/queue/take"})]}),"\n",(0,t.jsx)(n.h2,{id:"\u793a\u4f8b",children:"\u793a\u4f8b"}),"\n",(0,t.jsx)(n.h3,{id:"\u79bb\u7ebf\u4efb\u52a1\u793a\u4f8b",children:"\u79bb\u7ebf\u4efb\u52a1\u793a\u4f8b"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u8bf7\u6c42"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl -X POST "https://${Host}/v1/queue/take" \\\n  -H "Content-Type: application/json" \\\n  -H "Authorization: Bearer ${apikey}" \\\n  -d \'{\n    "queues": [\n        "test-queue:1"\n    ],\n    "strategy": "active_passive",\n    "endpoint": "/v1/chat/completions",\n    "size": 1\n}\'\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u54cd\u5e94 (\u79bb\u7ebf\u4efb\u52a1\uff0c\u5305\u542bbatch_id\u548ctrace_id)"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "test-queue:1": [\n    {\n      "ak": "xxx",\n      "endpoint": "/v1/chat/completions",\n      "queue": "test-queue",\n      "level": 1,\n      "data": {\n        "model": "deepseek-r1-20250401",\n        "messages": [\n          {\n            "role": "user",\n            "content": "\u4f60\u597d"\n          }\n        ],\n        "stream": false\n      },\n      "status": "waiting",\n      "task_id": "TASK-X-X-X-XXXXXXXXXXXX-XXXX-XXXXXX",\n      "batch_id": "BATCH-X-X-XXXXXXXXXXXX-XXXX-XXXXXX",\n      "trace_id": "BATCH-X-X-XXXXXXXXXXXX-XXXX-XXXXXX",\n      "start_time": 1762863595000,\n      "running_time": 0,\n      "expire_time": 1762949994000,\n      "completed_time": 0,\n      "callback_url": "",\n      "response_mode": "batch"\n    }\n  ]\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"\u5728\u7ebf\u4efb\u52a1\u793a\u4f8b",children:"\u5728\u7ebf\u4efb\u52a1\u793a\u4f8b"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u8bf7\u6c42"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl -X POST "https://${Host}/v1/queue/take" \\\n  -H "Content-Type: application/json" \\\n  -H "Authorization: Bearer ${apikey}" \\\n  -d \'{\n    "queues": [\n        "test-queue:0"\n    ],\n    "strategy": "fifo",\n    "endpoint": "/v1/chat/completions",\n    "size": 1\n}\'\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u54cd\u5e94 (\u5728\u7ebf\u4efb\u52a1\uff0c\u5305\u542binstance_id)"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "test-queue:0": [\n    {\n      "ak": "xxx",\n      "endpoint": "/v1/chat/completions",\n      "queue": "test-queue",\n      "level": 0,\n      "data": {\n        "model": "deepseek-r1-20250401",\n        "messages": [\n          {\n            "role": "user",\n            "content": "\u4f60\u597d"\n          }\n        ],\n        "stream": false\n      },\n      "status": "waiting",\n      "task_id": "TASK-X-X-X-XXXXXXXXXXXX-XXXX-XXXXXX",\n      "instance_id": "xx.xx.xx.xx:xxx",\n      "start_time": 1762863595000,\n      "running_time": 0,\n      "expire_time": 1762949994000,\n      "completed_time": 0,\n      "callback_url": "",\n      "response_mode": "blocking"\n    }\n  ]\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"request-body-parameters",children:"Request Body Parameters"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"\u53c2\u6570"}),(0,t.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,t.jsx)(n.th,{children:"\u5fc5\u9700"}),(0,t.jsx)(n.th,{children:"\u8bf4\u660e"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"queues"})}),(0,t.jsx)(n.td,{children:"string[]"}),(0,t.jsx)(n.td,{children:"Required"}),(0,t.jsxs)(n.td,{children:['\u8981\u83b7\u53d6\u4efb\u52a1\u7684\u961f\u5217\u540d\u79f0\u5217\u8868(\u683c\u5f0f: "queueName',":level",'")']})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"strategy"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:"Optional"}),(0,t.jsx)(n.td,{children:"\u961f\u5217\u7b56\u7565: fifo\u3001round_robin\u3001active_passive\u3001sequential\uff0c\u9ed8\u8ba4fifo"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"endpoint"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:"Optional"}),(0,t.jsx)(n.td,{children:"\u5904\u7406\u4efb\u52a1\u7684\u80fd\u529b\u70b9"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"size"})}),(0,t.jsx)(n.td,{children:"integer"}),(0,t.jsx)(n.td,{children:"Required"}),(0,t.jsx)(n.td,{children:"\u83b7\u53d6\u4efb\u52a1\u6570"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"queue-strategies-\u961f\u5217\u7b56\u7565",children:"Queue Strategies (\u961f\u5217\u7b56\u7565)"}),"\n",(0,t.jsx)(n.h3,{id:"fifo\u7b56\u7565",children:"fifo\u7b56\u7565"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u903b\u8f91"}),": First-In-First-Out\uff0c\u5148\u8fdb\u5148\u51fa"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u884c\u4e3a"}),": \u6309\u7167\u4efb\u52a1\u63d0\u4ea4\u7684\u65f6\u95f4\u987a\u5e8f\u4f9d\u6b21\u5904\u7406\uff0c\u6700\u65e9\u63d0\u4ea4\u7684\u4efb\u52a1\u6700\u5148\u88ab\u53d6\u51fa"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u9002\u7528\u573a\u666f"}),": \u9700\u8981\u4e25\u683c\u6309\u65f6\u95f4\u987a\u5e8f\u5904\u7406\u7684\u573a\u666f"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"round_robin\u7b56\u7565",children:"round_robin\u7b56\u7565"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u903b\u8f91"}),": \u8f6e\u8be2\u8c03\u5ea6\uff0c\u5728\u591a\u4e2a\u961f\u5217\u95f4\u8f6e\u6d41\u53d6\u4efb\u52a1"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u884c\u4e3a"}),": \u4f9d\u6b21\u4ece\u6bcf\u4e2a\u961f\u5217\u4e2d\u53d6\u4efb\u52a1\uff0c\u5b9e\u73b0\u8d1f\u8f7d\u5747\u8861"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u9002\u7528\u573a\u666f"}),": \u591a\u4e2a\u961f\u5217\u9700\u8981\u5e73\u5747\u5206\u914d\u5904\u7406\u8d44\u6e90\u7684\u573a\u666f"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"active_passive\u7b56\u7565",children:"active_passive\u7b56\u7565"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u903b\u8f91"}),": \u4e3b\u5907\u6a21\u5f0f\uff0c\u4f18\u5148\u5904\u7406\u4e3b\u961f\u5217\u4efb\u52a1"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u884c\u4e3a"}),": \u4f18\u5148\u4ece\u7b2c\u4e00\u4e2a\u961f\u5217\uff08\u4e3b\u961f\u5217\uff09\u83b7\u53d6\u4efb\u52a1\uff0c\u5f53\u4e3b\u961f\u5217\u4e3a\u7a7a\u65f6\u624d\u4ece\u5907\u7528\u961f\u5217\u83b7\u53d6"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u9002\u7528\u573a\u666f"}),": \u6709\u4f18\u5148\u7ea7\u533a\u5206\u7684\u573a\u666f\uff0c\u9ad8\u4f18\u5148\u7ea7\u961f\u5217\u4f18\u5148\u5904\u7406"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"sequential\u7b56\u7565",children:"sequential\u7b56\u7565"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u903b\u8f91"}),": \u5168\u5c40\u987a\u5e8f\u6267\u884c\uff0c\u786e\u4fdd\u6bcf\u4e2a\u961f\u5217\u5728\u540c\u4e00\u65f6\u95f4\u53ea\u80fd\u6709\u4e00\u4e2a\u4efb\u52a1\u5728\u8fd0\u884c\uff0c\u6bcf\u4e2a\u961f\u5217\u53ea\u53d6\u4e00\u4e2a"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u884c\u4e3a"}),": \u8df3\u8fc7\u6b63\u5728\u8fd0\u884c\u4efb\u52a1\u7684\u961f\u5217\uff0c\u4ece\u5176\u4ed6\u961f\u5217\u4e2d\u6309\u987a\u5e8f\u83b7\u53d6\u6700\u65e9\u7684\u4efb\u52a1\uff0c\u8bbe\u7f6e\u8fd0\u884c\u9501\u9632\u6b62\u5e76\u53d1\u6267\u884c"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u9002\u7528\u573a\u666f"}),": \u9700\u8981\u4e25\u683c\u987a\u5e8f\u6267\u884c\u7684\u573a\u666f\uff0c\u907f\u514d\u540c\u4e00\u961f\u5217\u4efb\u52a1\u5e76\u53d1\u5bfc\u81f4\u7684\u7ade\u4e89\u6761\u4ef6"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"returns",children:"Returns"}),"\n",(0,t.jsxs)(n.p,{children:["\u54cd\u5e94\u683c\u5f0f\uff1a",(0,t.jsx)(n.code,{children:"{\u961f\u5217\u540d\u79f0: [\u4efb\u52a1\u6570\u7ec4]}"})]}),"\n",(0,t.jsx)(n.h3,{id:"\u5b57\u6bb5\u5dee\u5f02\u8bf4\u660e",children:"\u5b57\u6bb5\u5dee\u5f02\u8bf4\u660e"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u5728\u7ebf\u4efb\u52a1 (level=0)"}),"\uff1a\u5305\u542b ",(0,t.jsx)(n.code,{children:"instance_id"})," \u5b57\u6bb5\uff0c\u7528\u4e8e\u5b9e\u65f6\u4efb\u52a1\u5904\u7406\u548c\u4e8b\u4ef6\u603b\u7ebf\u901a\u4fe1"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u79bb\u7ebf\u4efb\u52a1 (level=1)"}),"\uff1a\u5305\u542b ",(0,t.jsx)(n.code,{children:"batch_id"})," \u548c ",(0,t.jsx)(n.code,{children:"trace_id"})," \u5b57\u6bb5\uff0c\u7528\u4e8e\u6279\u5904\u7406\u4efb\u52a1\u8ffd\u8e2a\u548c\u7ba1\u7406"]}),"\n"]})]})}function o(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>d});var i=s(6540);const t={},r=i.createContext(t);function l(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);